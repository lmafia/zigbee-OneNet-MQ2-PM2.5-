define("kg/detail-item-recommend/0.0.12/lib/c/matching-combo/page",["node","dom","ua"],function(a,e,t){function n(a){g=(new Date).valueOf(),g-l>s?a():o.later(function(){a()},s+l-g)}function i(a){var e=this;e.dataBox=d.get(a.dataBox),e.pageBox=d.get(a.pageBox),e.meals=a.meals,e.dataBox&&e.pageBox&&(e.api=a.api,e.activePageIndex=0,e.cache=[],e.indicator=null,e.pagers=c.all(".J_Pager",d.next(e.dataBox)),e.currentPage=d.get(".tb-current",e.pageBox),e.maxPageIndex=parseInt(d.attr(e.pageBox,"data-max-page"),10)-1,e._init())}var o=KISSY,c=a("node"),d=a("dom"),r=a("ua"),s=300,l=0,g=0,u="tb-hidden",h=c.all("body");o.mix(i.prototype,{_init:function(){var a=this;a.cache.push(a.dataBox.innerHTML),a.pagers.on("click",function(e){e.preventDefault();var t=this;r.ie<8&&(t.hideFocus=!0),a._clickHandler(t),window.DT&&"function"==typeof DT.sendClick&&DT.sendClick("12.20."+(d.parent(t,".tb-mjs")?"1":"0"))})},_getCurrentPageIndex:function(a){var e,t=this;return e=d.hasClass(a,"J_Prev")?t.activePageIndex-1:d.hasClass(a,"J_Next")?t.activePageIndex+1:parseInt(d.attr(a,"data-index"),10),e>t.maxPageIndex?e=0:e<0&&(e=t.maxPageIndex),e},_getCurrentPageItem:function(a){return this.meals[a]},_changeCurrent:function(a){d.html(this.currentPage,a+1)},_clickHandler:function(a){var e,t,i=this,o=i._getCurrentPageIndex(a);if(o!==i.activePageIndex)if(i.activePageIndex=o,e=i.cache[o],t=i._getCurrentPageItem(o),l=(new Date).valueOf(),i._showIndicator(),e)n(function(){i._changeCurrent(o),i.dataBox.innerHTML=e,i._hideIndicator()});else{var c=i.api+"&page="+o+"&mealdata="+encodeURIComponent(t);h.fire("load",{api:c}),h.detach("loadsuccess"),h.detach("loaderror"),h.on("loadsuccess",function(){n(function(){i._hideIndicator(),i._changeCurrent(o),i.cache[o]=i.dataBox.innerHTML})}),h.on("loaderror",function(){i._hideIndicator()})}},_addIndicator:function(){var a=d.create('<div class="tb-indicator" style="visibility: hidden;"><p class="tb-indicator-mask"></p><p class="tb-indicator-msg"><img src="//assets.alicdn.com/mw/base/styles/component/more/images/loading.gif" /></p></div>');this.dataBox.parentNode.appendChild(a),this.indicator=a;var e=this;o.later(function(){6===r.ie&&(d.addClass(a,"tb-indicator-ie6"),d.css(a,"width","165px"),d.css(a,"height","45px"),d.css(a,"top",d.hasClass(e.dataBox,"tb-combo-data")?"55px":"25px")),d.css(a,"visibility","visible")},0)},_showIndicator:function(){var a=this;a.indicator?d.removeClass(a.indicator,u):a._addIndicator()},_hideIndicator:function(){d.addClass(this.indicator,u)}}),t.exports=i});define("kg/detail-item-recommend/0.0.12/lib/c/matching-combo/tpl/combo.xtpl",["kg/xtemplate/4.5.0/runtime"],function(e,a,n){"use strict";var l=e("kg/xtemplate/4.5.0/runtime");n.exports=function(){var e=new l(function(e){function a(e,a,n){var m=e.data,i=e.affix;a.data+='\n    <div class="tb-pagination" id="J_BundlePage" data-max-page="',d.line=7;var r=(l=i.mealComponentBO)!==n?null!=l?null!=(t=l.meals)?o=t.length:t:l:(l=m.mealComponentBO)!==n?null!=l?null!=(t=l.meals)?o=t.length:t:l:e.resolveLooseUp(["mealComponentBO","meals","length"]);a=a.writeEscaped(r),a.data+='">\n      <a href="#" class="J_Next tb-next J_Pager">\u4e0b\u4e00\u9875</a>\n      <div class="tb-page-indicator">\n        <span class="tb-current">1</span>/',d.line=10;var s=(l=i.mealComponentBO)!==n?null!=l?null!=(t=l.meals)?o=t.length:t:l:(l=m.mealComponentBO)!==n?null!=l?null!=(t=l.meals)?o=t.length:t:l:e.resolveLooseUp(["mealComponentBO","meals","length"]);return a=a.writeEscaped(s),a.data+='\n      </div>\n      <a href="#" class="J_Prev tb-prev J_Pager">\u4e0a\u4e00\u9875</a>\n    </div>\n    ',a}function n(e,n,o){var i=e.data,r=e.affix;n.data+='\n  <div class="tb-bundle">\n    <div id="J_BundleData" class="tb-bundle-data">\n    </div>\n    ',d.line=6,d.line=6;var s=(l=r.mealComponentBO)!==o?null!=l?t=l.meals:l:(l=i.mealComponentBO)!==o?null!=l?t=l.meals:l:e.resolveLooseUp(["mealComponentBO","meals"]);return n=f.call(m,e,{params:[s],fn:a},n),n.data+="\n  </div>\n  ",n}var l,t,o,m=this,i=m.root,r=m.buffer,s=m.scope,d=(m.runtime,m.name,m.pos),p=s.data,c=s.affix,u=i.nativeCommands,v=i.utils,f=(v.callFn,v.callDataFn,v.callCommand,u.range,u["void"],u.foreach,u.forin,u.each,u["with"],u["if"]);u.set,u.include,u.parse,u.extend,u.block,u.macro,u["debugger"];r.data+='<div id="matching-combo">\n  ',d.line=2,d.line=2;var g=(l=c.mealComponentBO)!==e?l:(l=p.mealComponentBO)!==e?l:s.resolveLooseUp(["mealComponentBO"]);return r=f.call(m,s,{params:[g],fn:n},r),r.data+="\n</div>\n",r});return e.render.apply(e,arguments)}});define("kg/detail-item-recommend/0.0.12/lib/c/matching-combo/tpl/comboItem.xtpl",["kg/xtemplate/4.5.0/runtime"],function(e,a,n){"use strict";var t=e("kg/xtemplate/4.5.0/runtime");n.exports=function(){var e=new t(function(e){function a(e,a,n){e.data,e.affix;return a.data+='class="tb-main" ',a}function n(e,a,n){e.data,e.affix;return a.data+='class="tb-empty" ',a}function t(e,a,n){e.data,e.affix;return a.data+='\n    <div class="tb-pic tb-s80 tb-empty-pic">\n      <img src="//img.alicdn.com/tps/i1/T1aIR3XohnXXXXXXXX-80-80.png" alt="\u7a7a\u56fe\u7247"/>\n    </div>\n    ',a}function l(e,a,n){var t=e.data,l=e.affix;a.data+='\n    <div class="tb-pic tb-s80">\n      <a href="',U.line=11;var o=(c=l.itemUrl)!==n?c:(c=t.itemUrl)!==n?c:e.resolveLooseUp(["itemUrl"]);a=a.writeEscaped(o),a.data+='" target="_blank"><img src="';var m=(c=l.picImgUrl)!==n?c:(c=t.picImgUrl)!==n?c:e.resolveLooseUp(["picImgUrl"]);a=a.writeEscaped(m),a.data+='_80x80.jpg" alt="';var r=(c=l.itemTitle)!==n?c:(c=t.itemTitle)!==n?c:e.resolveLooseUp(["itemTitle"]);a=a.writeEscaped(r),a.data+='" /></a>\n    </div>\n    <a href="',U.line=13;var i=(c=l.itemUrl)!==n?c:(c=t.itemUrl)!==n?c:e.resolveLooseUp(["itemUrl"]);a=a.writeEscaped(i),a.data+='" target="_blank" class="tb-title" title="';var s=(c=l.itemTitle)!==n?c:(c=t.itemTitle)!==n?c:e.resolveLooseUp(["itemTitle"]);a=a.writeEscaped(s),a.data+='">';var p=(c=l.itemTitle)!==n?c:(c=t.itemTitle)!==n?c:e.resolveLooseUp(["itemTitle"]);a=a.writeEscaped(p),a.data+='</a>\n    <em class="tb-price">\u4ef7\u683c\uff1a<em class="tb-rmb">&yen;</em>',U.line=14;var d=(c=l.reservePrice)!==n?c:(c=t.reservePrice)!==n?c:e.resolveLooseUp(["reservePrice"]);return a=a.writeEscaped(d),a.data+="<!--329.00--></em>\n    ",a}function o(e,o,m){var r=e.data,i=e.affix;o.data+="\n  <li ",U.line=4;var s=(c=i.xindex)!==m?c:(c=r.xindex)!==m?c:e.resolveLooseUp(["xindex"]),p=s;p=0===s,o=g.call(v,e,{params:[p],fn:a},o),o.data+="";var d=(c=i.itemId)!==m?c:(c=r.itemId)!==m?c:e.resolveLooseUp(["itemId"]),f=d;f=0===d,o=g.call(v,e,{params:[f],fn:n},o),o.data+=" >\n    ",U.line=5,U.line=5;var u=(c=i.itemId)!==m?c:(c=r.itemId)!==m?c:e.resolveLooseUp(["itemId"]),b=u;return b=0===u,o=g.call(v,e,{params:[b],fn:t,inverse:l},o),o.data+="\n  </li>\n  ",o}function m(e,a,n){var t=e.data,l=e.affix;a.data+='\n    <!-- \u8001\u642d\u914d -->\n    <p class="tb-total">\n      <span>\u5957\u9910\u4ef7\u683c\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',U.line=24;var o=(c=l.mealComponentBO)!==n?null!=c?d=c.mealPriceMoney:c:(c=t.mealComponentBO)!==n?null!=c?d=c.mealPriceMoney:c:e.resolveLooseUp(["mealComponentBO","mealPriceMoney"]);a=a.writeEscaped(o),a.data+='</em>\n    </p>\n    <p class="tb-save">\n      <span>\u8282\u7701\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',U.line=28;var m=(c=l.mealComponentBO)!==n?null!=c?d=c.saveMoney:c:(c=t.mealComponentBO)!==n?null!=c?d=c.saveMoney:c:e.resolveLooseUp(["mealComponentBO","saveMoney"]);return a=a.writeEscaped(m),a.data+="</em>\n    </p>\n  ",a}function r(e,a,n){var t=e.data,l=e.affix;a.data+='\n    <p class="tb-save">\n      <span>\u6700\u591a\u8282\u7701\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',U.line=39;var o=(c=l.mealComponentBO)!==n?null!=c?d=c.saveMoney:c:(c=t.mealComponentBO)!==n?null!=c?d=c.saveMoney:c:e.resolveLooseUp(["mealComponentBO","saveMoney"]);return a=a.writeEscaped(o),a.data+="</em>\n    </p>\n  ",a}function i(e,a,n){var t=e.data,l=e.affix;U.line=30;var o=(c=l.mealComponentBO)!==n?null!=c?d=c.saveMoney:c:(c=t.mealComponentBO)!==n?null!=c?d=c.saveMoney:c:e.resolveLooseUp(["mealComponentBO","saveMoney"]),m=o;return m="0.00"===o}function s(e,a,n){var t=e.data,l=e.affix;a.data+='\n    <!-- \u65b0\u642d\u914d -->\n    <p class="tb-total">\n      <span>\u5957\u9910\u4ef7\u683c\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',U.line=34;var o=(c=l.mealComponentBO)!==n?null!=c?d=c.mealPriceMoney:c:(c=t.mealComponentBO)!==n?null!=c?d=c.mealPriceMoney:c:e.resolveLooseUp(["mealComponentBO","mealPriceMoney"]);return a=a.writeEscaped(o),a.data+="</em>\n    </p>\n  ",a}function p(e,a,n){var t=e.data,l=e.affix;a.data+='\n<ul class="tb-bundle-list">\n  ',U.line=3,U.line=3;var p=(c=l.mealComponentBO)!==n?null!=c?d=c.mealItems:c:(c=t.mealComponentBO)!==n?null!=c?d=c.mealItems:c:e.resolveLooseUp(["mealComponentBO","mealItems"]);a=y.call(v,e,{params:[p],fn:o},a),a.data+='\n</ul>\n<div class="tb-bundle-info" data-spm="1000371">\n  ',U.line=20,U.line=20;var f=(c=l.mealComponentBO)!==n?null!=c?d=c.newDataFlag:c:(c=t.mealComponentBO)!==n?null!=c?d=c.newDataFlag:c:e.resolveLooseUp(["mealComponentBO","newDataFlag"]),u=f;u=f!==!0,a=g.call(v,e,{params:[u],fn:m,inverse:r,elseIfs:[{test:i,fn:s}]},a),a.data+='\n  <a class="tb-view" data-spm="d9" href="',U.line=42;var b=(c=l.mealComponentBO)!==n?null!=c?d=c.mealUrl:c:(c=t.mealComponentBO)!==n?null!=c?d=c.mealUrl:c:e.resolveLooseUp(["mealComponentBO","mealUrl"]);return a=a.writeEscaped(b),a.data+='" target="_blank">\u67e5\u770b\u5957\u9910</a>\n</div>\n',a}var c,d,v=this,f=v.root,u=v.buffer,b=v.scope,U=(v.runtime,v.name,v.pos),C=b.data,B=b.affix,O=f.nativeCommands,x=f.utils,y=(x.callFn,x.callDataFn,x.callCommand,O.range,O["void"],O.foreach,O.forin,O.each),g=(O["with"],O["if"]);O.set,O.include,O.parse,O.extend,O.block,O.macro,O["debugger"];u.data+="",U.line=1;var L=(c=B.mealComponentBO)!==e?c:(c=C.mealComponentBO)!==e?c:b.resolveLooseUp(["mealComponentBO"]);return u=g.call(v,b,{params:[L],fn:p},u),u.data+="\n",u});return e.render.apply(e,arguments)}});