define("kg/detail-item-recommend/0.0.12/index",["kg/detail-item-recommend/0.0.12/lib/c/matching-combo/","node","dom","ua","kg/xtemplate/4.5.0/runtime","io","cookie","base","event-custom","kg/detail-item-recommend/0.0.12/lib/c/matching-combo/index.css","event","kg/detail-item-recommend/0.0.12/lib/index.css"],function(e,a,t){var n,i,o,r,l,s,d,c,m,u,f,p=e("kg/detail-item-recommend/0.0.12/lib/c/matching-combo/"),v=e("node"),g=e("dom"),h=e("ua"),b=e("kg/xtemplate/4.5.0/runtime"),_=e("io"),C=e("cookie"),x=e("base"),y=e("event-custom"),w=(e("kg/detail-item-recommend/0.0.12/lib/c/matching-combo/index.css"),e("event"));e("kg/detail-item-recommend/0.0.12/lib/index.css");n=function(e){var a=KISSY,t={sendStatistic:function(e){e&&((new Image).src="//gm.mmstat.com"+e+"?cache="+a.now())}};return e=t}(),i=function(e){return e={tad_first_area:{style:"tab",container:"#tad_first_area",items:{8:{title:"\u642d\u914d\u5957\u9910",modName:"MatchingCombo",container:"#J_TadMatchingCombo",modObject:p},9:{title:"\u81ea\u7531\u642d\u914d",modName:"3",modPath:""}}},tad_second_area:{style:"block",items:{}}}}(),o=function(e){function a(e){d=(new Date).valueOf(),d-s>l?e():n.later(function(){e()},l+s-d)}function t(e){var a=this;a.dataBox=o.get(e.dataBox),a.pageBox=o.get(e.pageBox),a.meals=e.meals,a.dataBox&&a.pageBox&&(a.api=e.api,a.activePageIndex=0,a.cache=[],a.indicator=null,a.pagers=i.all(".J_Pager",o.next(a.dataBox)),a.currentPage=o.get(".tb-current",a.pageBox),a.maxPageIndex=parseInt(o.attr(a.pageBox,"data-max-page"),10)-1,a._init())}var n=KISSY,i=v,o=g,r=h,l=300,s=0,d=0,c="tb-hidden",m=i.all("body");return n.mix(t.prototype,{_init:function(){var e=this;e.cache.push(e.dataBox.innerHTML),e.pagers.on("click",function(a){a.preventDefault();var t=this;r.ie<8&&(t.hideFocus=!0),e._clickHandler(t),window.DT&&"function"==typeof DT.sendClick&&DT.sendClick("12.20."+(o.parent(t,".tb-mjs")?"1":"0"))})},_getCurrentPageIndex:function(e){var a,t=this;return a=o.hasClass(e,"J_Prev")?t.activePageIndex-1:o.hasClass(e,"J_Next")?t.activePageIndex+1:parseInt(o.attr(e,"data-index"),10),a>t.maxPageIndex?a=0:a<0&&(a=t.maxPageIndex),a},_getCurrentPageItem:function(e){return this.meals[e]},_changeCurrent:function(e){o.html(this.currentPage,e+1)},_clickHandler:function(e){var t,n,i=this,o=i._getCurrentPageIndex(e);if(o!==i.activePageIndex)if(i.activePageIndex=o,t=i.cache[o],n=i._getCurrentPageItem(o),s=(new Date).valueOf(),i._showIndicator(),t)a(function(){i._changeCurrent(o),i.dataBox.innerHTML=t,i._hideIndicator()});else{var r=i.api+"&page="+o+"&mealdata="+encodeURIComponent(n);m.fire("load",{api:r}),m.detach("loadsuccess"),m.detach("loaderror"),m.on("loadsuccess",function(){a(function(){i._hideIndicator(),i._changeCurrent(o),i.cache[o]=i.dataBox.innerHTML})}),m.on("loaderror",function(){i._hideIndicator()})}},_addIndicator:function(){var e=o.create('<div class="tb-indicator" style="visibility: hidden;"><p class="tb-indicator-mask"></p><p class="tb-indicator-msg"><img src="//assets.alicdn.com/mw/base/styles/component/more/images/loading.gif" /></p></div>');this.dataBox.parentNode.appendChild(e),this.indicator=e;var a=this;n.later(function(){6===r.ie&&(o.addClass(e,"tb-indicator-ie6"),o.css(e,"width","165px"),o.css(e,"height","45px"),o.css(e,"top",o.hasClass(a.dataBox,"tb-combo-data")?"55px":"25px")),o.css(e,"visibility","visible")},0)},_showIndicator:function(){var e=this;e.indicator?o.removeClass(e.indicator,c):e._addIndicator()},_hideIndicator:function(){o.addClass(this.indicator,c)}}),e=t}(),r=function(e){"use strict";var a=b;return e=function(){var e=new a(function(e){function a(e,a,t){var r=e.data,l=e.affix;a.data+='\n    <div class="tb-pagination" id="J_BundlePage" data-max-page="',c.line=7;var s=(n=l.mealComponentBO)!==t?null!=n?null!=(i=n.meals)?o=i.length:i:n:(n=r.mealComponentBO)!==t?null!=n?null!=(i=n.meals)?o=i.length:i:n:e.resolveLooseUp(["mealComponentBO","meals","length"]);a=a.writeEscaped(s),a.data+='">\n      <a href="#" class="J_Next tb-next J_Pager">\u4e0b\u4e00\u9875</a>\n      <div class="tb-page-indicator">\n        <span class="tb-current">1</span>/',c.line=10;var d=(n=l.mealComponentBO)!==t?null!=n?null!=(i=n.meals)?o=i.length:i:n:(n=r.mealComponentBO)!==t?null!=n?null!=(i=n.meals)?o=i.length:i:n:e.resolveLooseUp(["mealComponentBO","meals","length"]);return a=a.writeEscaped(d),a.data+='\n      </div>\n      <a href="#" class="J_Prev tb-prev J_Pager">\u4e0a\u4e00\u9875</a>\n    </div>\n    ',a}function t(e,t,o){var l=e.data,s=e.affix;t.data+='\n  <div class="tb-bundle">\n    <div id="J_BundleData" class="tb-bundle-data">\n    </div>\n    ',c.line=6,c.line=6;var d=(n=s.mealComponentBO)!==o?null!=n?i=n.meals:n:(n=l.mealComponentBO)!==o?null!=n?i=n.meals:n:e.resolveLooseUp(["mealComponentBO","meals"]);return t=v.call(r,e,{params:[d],fn:a},t),t.data+="\n  </div>\n  ",t}var n,i,o,r=this,l=r.root,s=r.buffer,d=r.scope,c=(r.runtime,r.name,r.pos),m=d.data,u=d.affix,f=l.nativeCommands,p=l.utils,v=(p.callFn,p.callDataFn,p.callCommand,f.range,f["void"],f.foreach,f.forin,f.each,f["with"],f["if"]);f.set,f.include,f.parse,f.extend,f.block,f.macro,f["debugger"];s.data+='<div id="matching-combo">\n  ',c.line=2,c.line=2;var g=(n=u.mealComponentBO)!==e?n:(n=m.mealComponentBO)!==e?n:d.resolveLooseUp(["mealComponentBO"]);return s=v.call(r,d,{params:[g],fn:t},s),s.data+="\n</div>\n",s});return e.render.apply(e,arguments)}}(),l=function(e){"use strict";var a=b;return e=function(){var e=new a(function(e){function a(e,a,t){e.data,e.affix;return a.data+='class="tb-main" ',a}function t(e,a,t){e.data,e.affix;return a.data+='class="tb-empty" ',a}function n(e,a,t){e.data,e.affix;return a.data+='\n    <div class="tb-pic tb-s80 tb-empty-pic">\n      <img src="//img.alicdn.com/tps/i1/T1aIR3XohnXXXXXXXX-80-80.png" alt="\u7a7a\u56fe\u7247"/>\n    </div>\n    ',a}function i(e,a,t){var n=e.data,i=e.affix;a.data+='\n    <div class="tb-pic tb-s80">\n      <a href="',h.line=11;var o=(m=i.itemUrl)!==t?m:(m=n.itemUrl)!==t?m:e.resolveLooseUp(["itemUrl"]);a=a.writeEscaped(o),a.data+='" target="_blank"><img src="';var r=(m=i.picImgUrl)!==t?m:(m=n.picImgUrl)!==t?m:e.resolveLooseUp(["picImgUrl"]);a=a.writeEscaped(r),a.data+='_80x80.jpg" alt="';var l=(m=i.itemTitle)!==t?m:(m=n.itemTitle)!==t?m:e.resolveLooseUp(["itemTitle"]);a=a.writeEscaped(l),a.data+='" /></a>\n    </div>\n    <a href="',h.line=13;var s=(m=i.itemUrl)!==t?m:(m=n.itemUrl)!==t?m:e.resolveLooseUp(["itemUrl"]);a=a.writeEscaped(s),a.data+='" target="_blank" class="tb-title" title="';var d=(m=i.itemTitle)!==t?m:(m=n.itemTitle)!==t?m:e.resolveLooseUp(["itemTitle"]);a=a.writeEscaped(d),a.data+='">';var c=(m=i.itemTitle)!==t?m:(m=n.itemTitle)!==t?m:e.resolveLooseUp(["itemTitle"]);a=a.writeEscaped(c),a.data+='</a>\n    <em class="tb-price">\u4ef7\u683c\uff1a<em class="tb-rmb">&yen;</em>',h.line=14;var u=(m=i.reservePrice)!==t?m:(m=n.reservePrice)!==t?m:e.resolveLooseUp(["reservePrice"]);return a=a.writeEscaped(u),a.data+="<!--329.00--></em>\n    ",a}function o(e,o,r){var l=e.data,s=e.affix;o.data+="\n  <li ",h.line=4;var d=(m=s.xindex)!==r?m:(m=l.xindex)!==r?m:e.resolveLooseUp(["xindex"]),c=d;c=0===d,o=w.call(f,e,{params:[c],fn:a},o),o.data+="";var u=(m=s.itemId)!==r?m:(m=l.itemId)!==r?m:e.resolveLooseUp(["itemId"]),p=u;p=0===u,o=w.call(f,e,{params:[p],fn:t},o),o.data+=" >\n    ",h.line=5,h.line=5;var v=(m=s.itemId)!==r?m:(m=l.itemId)!==r?m:e.resolveLooseUp(["itemId"]),g=v;return g=0===v,o=w.call(f,e,{params:[g],fn:n,inverse:i},o),o.data+="\n  </li>\n  ",o}function r(e,a,t){var n=e.data,i=e.affix;a.data+='\n    <!-- \u8001\u642d\u914d -->\n    <p class="tb-total">\n      <span>\u5957\u9910\u4ef7\u683c\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',h.line=24;var o=(m=i.mealComponentBO)!==t?null!=m?u=m.mealPriceMoney:m:(m=n.mealComponentBO)!==t?null!=m?u=m.mealPriceMoney:m:e.resolveLooseUp(["mealComponentBO","mealPriceMoney"]);a=a.writeEscaped(o),a.data+='</em>\n    </p>\n    <p class="tb-save">\n      <span>\u8282\u7701\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',h.line=28;var r=(m=i.mealComponentBO)!==t?null!=m?u=m.saveMoney:m:(m=n.mealComponentBO)!==t?null!=m?u=m.saveMoney:m:e.resolveLooseUp(["mealComponentBO","saveMoney"]);return a=a.writeEscaped(r),a.data+="</em>\n    </p>\n  ",a}function l(e,a,t){var n=e.data,i=e.affix;a.data+='\n    <p class="tb-save">\n      <span>\u6700\u591a\u8282\u7701\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',h.line=39;var o=(m=i.mealComponentBO)!==t?null!=m?u=m.saveMoney:m:(m=n.mealComponentBO)!==t?null!=m?u=m.saveMoney:m:e.resolveLooseUp(["mealComponentBO","saveMoney"]);return a=a.writeEscaped(o),a.data+="</em>\n    </p>\n  ",a}function s(e,a,t){var n=e.data,i=e.affix;h.line=30;var o=(m=i.mealComponentBO)!==t?null!=m?u=m.saveMoney:m:(m=n.mealComponentBO)!==t?null!=m?u=m.saveMoney:m:e.resolveLooseUp(["mealComponentBO","saveMoney"]),r=o;return r="0.00"===o}function d(e,a,t){var n=e.data,i=e.affix;a.data+='\n    <!-- \u65b0\u642d\u914d -->\n    <p class="tb-total">\n      <span>\u5957\u9910\u4ef7\u683c\uff1a</span>\n      <em class="tb-rmb">&yen;</em><em>',h.line=34;var o=(m=i.mealComponentBO)!==t?null!=m?u=m.mealPriceMoney:m:(m=n.mealComponentBO)!==t?null!=m?u=m.mealPriceMoney:m:e.resolveLooseUp(["mealComponentBO","mealPriceMoney"]);return a=a.writeEscaped(o),a.data+="</em>\n    </p>\n  ",a}function c(e,a,t){var n=e.data,i=e.affix;a.data+='\n<ul class="tb-bundle-list">\n  ',h.line=3,h.line=3;var c=(m=i.mealComponentBO)!==t?null!=m?u=m.mealItems:m:(m=n.mealComponentBO)!==t?null!=m?u=m.mealItems:m:e.resolveLooseUp(["mealComponentBO","mealItems"]);a=y.call(f,e,{params:[c],fn:o},a),a.data+='\n</ul>\n<div class="tb-bundle-info" data-spm="1000371">\n  ',h.line=20,h.line=20;var p=(m=i.mealComponentBO)!==t?null!=m?u=m.newDataFlag:m:(m=n.mealComponentBO)!==t?null!=m?u=m.newDataFlag:m:e.resolveLooseUp(["mealComponentBO","newDataFlag"]),v=p;v=p!==!0,a=w.call(f,e,{params:[v],fn:r,inverse:l,elseIfs:[{test:s,fn:d}]},a),a.data+='\n  <a class="tb-view" data-spm="d9" href="',h.line=42;var g=(m=i.mealComponentBO)!==t?null!=m?u=m.mealUrl:m:(m=n.mealComponentBO)!==t?null!=m?u=m.mealUrl:m:e.resolveLooseUp(["mealComponentBO","mealUrl"]);return a=a.writeEscaped(g),a.data+='" target="_blank">\u67e5\u770b\u5957\u9910</a>\n</div>\n',a}var m,u,f=this,p=f.root,v=f.buffer,g=f.scope,h=(f.runtime,f.name,f.pos),b=g.data,_=g.affix,C=p.nativeCommands,x=p.utils,y=(x.callFn,x.callDataFn,x.callCommand,C.range,C["void"],C.foreach,C.forin,C.each),w=(C["with"],C["if"]);C.set,C.include,C.parse,C.extend,C.block,C.macro,C["debugger"];v.data+="",h.line=1;var I=(m=_.mealComponentBO)!==e?m:(m=b.mealComponentBO)!==e?m:g.resolveLooseUp(["mealComponentBO"]);return v=w.call(f,g,{params:[I],fn:c},v),v.data+="\n",v});return e.render.apply(e,arguments)}}(),s=function(e){var a=i,t=KISSY,n={plugins:{},init:function(e){var n=this,e=e||a;return t.each(e,function(e,a){n.plugins[a]={},n.plugins[a].items=[],n.plugins[a].showType=-1}),n.plugins},add:function(e,a){var t=this.plugins,n=t[e].items;return n.length>0?n.push(a):(n.push(a),t[e].showType=a),t},rm:function(e,a){a=parseInt(a);var n=this.plugins,i=t.indexOf(a,n[e].items);return i>-1&&n[e].items.splice(i,1),n[e].showType=n[e].items.length>0?n[e].items[0]:-1,n},switchTo:function(e,a){var t=this.plugins;t[e].showType=a},get:function(){return this.plugins}};return e=n}(),d=function(e){"use strict";var a=b;return e=function(){var e=new a(function(e){function a(e,a,t){e.data,e.affix;return a.data+=" selected ",a}function t(e,a,t){e.data,e.affix;return a.data+="tb-tad-nav-1212",a}function n(e,n,i){var o=e.data,s=e.affix;n.data+='\n            <li class="tb-tad-nav ',m.line=5;var d=(r=s.xindex)!==i?r:(r=o.xindex)!==i?r:e.resolveLooseUp(["xindex"]),c=d;c=0===d,n=h.call(l,e,{params:[c],fn:a},n),n.data+=" ";var u=(r=s.type)!==i?r:(r=o.type)!==i?r:e.resolveLooseUp(["type"]),f=u;f=12===u,n=h.call(l,e,{params:[f],fn:t},n),n.data+='" data-type="';var p=(r=s.type)!==i?r:(r=o.type)!==i?r:e.resolveLooseUp(["type"]);n=n.writeEscaped(p),n.data+='">\n                <a class="tb-tab-anchor" href="#" hidefocus="true"> ',m.line=6;var v=(r=s.name)!==i?r:(r=o.name)!==i?r:e.resolveLooseUp(["name"]);return n=n.writeEscaped(v),n.data+=' </a>\n                <div class="tb-selected-indicator" href="#"></div>\n            </li>\n            ',n}function i(e,a,t){e.data,e.affix;return a.data+=" tb-tad-hidden ",a}function o(e,a,t){var n=e.data,o=e.affix;a.data+='\n            <div class="tad-tabcon-anchor ',m.line=14;var s=(r=o.xindex)!==t?r:(r=n.xindex)!==t?r:e.resolveLooseUp(["xindex"]),d=s;d=0!==s,a=h.call(l,e,{params:[d],fn:i},a),a.data+='" id="J_Tad';var c=(r=o.modName)!==t?r:(r=n.modName)!==t?r:e.resolveLooseUp(["modName"]);a=a.writeEscaped(c),a.data+='" data-type="';var u=(r=o.type)!==t?r:(r=n.type)!==t?r:e.resolveLooseUp(["type"]);return a=a.writeEscaped(u),a.data+='">\n\n            </div>\n        ',a}var r,l=this,s=l.root,d=l.buffer,c=l.scope,m=(l.runtime,l.name,l.pos),u=c.data,f=c.affix,p=s.nativeCommands,v=s.utils,g=(v.callFn,v.callDataFn,v.callCommand,p.range,p["void"],p.foreach,p.forin,p.each),h=(p["with"],p["if"]);p.set,p.include,p.parse,p.extend,p.block,p.macro,p["debugger"];d.data+='<div class="tb-tad-first-area tb-clearfix">\n    <div class="tb-tad-tabbar-inner-wrap">\n        <ul class="tb-tabbar clear" id="J_TadTabBar">\n            ',m.line=4,m.line=4;var b=(r=f.data)!==e?r:(r=u.data)!==e?r:c.resolveLooseUp(["data"]);d=g.call(l,c,{params:[b],fn:n},d),d.data+='\n        </ul>\n    </div>\n    <div class="tb-tad-tabcon-inner-wrap">\n        ',m.line=13,m.line=13;var _=(r=f.data)!==e?r:(r=u.data)!==e?r:c.resolveLooseUp(["data"]);return d=g.call(l,c,{params:[_],fn:o},d),d.data+="\n    </div>\n</div>\n\n\n",d});return e.render.apply(e,arguments)}}(),c=function(e){var a=KISSY,t=n,o=i,r=s,l=d,c=v.all,m=_,u=C;r.init();var f=[];f.tad_first_area=l;var p=!1,g=!1,h=0,b=!1,x=null,y=0,w={init:function(e){var a=this;a.data=e.data,a.isDebug=e.isDebug,a.extraOption();try{a.render()}catch(t){c("body").fire("track",{msg:{url:location.href},category:"recommend:render:false"})}a.load(),a.bindEvent()},render:function(){var e=this;e.data&&e.data.tad_first_area&&a.each(e.data.tad_first_area,function(a){if(4==a.type)return e.data.tad_first_area.unshift({name:"1212",type:12}),!1}),a.each(e.data,function(e,t){if(e&&o[t]&&f[t]){var n=c(o[t].container),i=o[t].items,r=[];a.each(e,function(e){e=a.merge(e,i[e.type]),r.push(e)}),n.html(f[t]({data:r}))}})},reflow:function(e){var t=r.get(),n=t[e].items,i=t[e].showType,o=c("#"+e);i<0?o.hide():o.show(),"tad_first_area"==e&&(o.all(".tb-tad-nav").each(function(){var e=c(this).attr("data-type");e==i?c(this).addClass("selected"):c(this).removeClass("selected"),a.inArray(parseInt(e),n)||c(this).remove()}),o.all(".tad-tabcon-anchor").each(function(){var e=c(this).attr("data-type");e!=i?c(this).addClass("tb-tad-hidden"):c(this).removeClass("tb-tad-hidden"),a.inArray(parseInt(e),n)||c(this).remove()}))},_reflowSingleModInFirstArea:function(e){var t=r.get(),n=c("#tad_first_area"),i=t.tad_first_area.items,o=t.tad_first_area.showType,l=e.modName;if(o<0?n.hide():n.show(),"HeartElection"==l)var s="4";else if("MatchingCombo"==l)s="8";else{if("1212"!=l)return;s="12"}n.all(".tb-tad-nav").each(function(){var e=c(this).attr("data-type");e==o?c(this).addClass("selected"):c(this).removeClass("selected"),a.inArray(parseInt(s),i)&&e==s&&c(this).css({display:"inline"})}),n.all(".tad-tabcon-anchor").each(function(){var e=c(this).attr("data-type");e!=o?c(this).addClass("tb-tad-hidden"):c(this).removeClass("tb-tad-hidden")})},load:function(){var e=this,t=!1,n=!1,i=[],l=[];a.each(e.data,function(e,s){e&&o[s]&&a.each(e,function(e){var a=o[s].items[e.type];a&&(r.add(s,e.type),"ShopPromo"==a.modName||"MatchingCombo"==a.modName?(t||(t=!0),i.push(a)):"HeartElection"!=a.modName&&"1212"!=a.modName||(n||(n=!0),l.push(a)))})}),!t&&(g=!0),t&&e.extraRequest(function(t){a.each(i,function(a){var n=a.modObject;try{n&&new n({container:a.container,data:t,successFn:function(){e.isAllUmpModInited(i.length),"MatchingCombo"==a.modName&&e._reflowSingleModInFirstArea(a)},errorFn:function(){e.isAllUmpModInited(i.length),"MatchingCombo"==a.modName&&(r.rm("tad_first_area",8),e.reflow("tad_first_area"))}}).init()}catch(o){c("body").fire("track",{msg:{url:location.href},category:"recommend:exec:false"})}})},function(){c("body").fire("track",{msg:{url:location.href,category:"recommend:request:false:umperror"}})})},bindEvent:function(){var e=this,a=c("#tad_first_area");a.on("click",function(a){var n=a.target;if(c(n).hasClass("tb-tad-nav")||c(n).hasClass("tb-tab-anchor")){a.preventDefault();var i=c(n).parent(".tb-tad-nav")||c(n),o=i.attr("data-type");e.goldLog(o),r.switchTo("tad_first_area",o),e.reflow("tad_first_area"),"4"==o&&t.sendStatistic("/sitem.5.1")}})},extraRequest:function(e,t){var n=g_config.idata&&g_config.idata.seller&&g_config.idata.seller.id,i=g_config.tadComponetCdn,o=g_config.itemId,r=!!~location.href.indexOf("daily"),l=r?"daily.taobao.net":"taobao.com";if(i)var s="//otds.alicdn.com/json/MMComponent.htm?meal=1&userId="+n+"&itemId="+o;else s="//detailskip."+l+"/json/MMComponent.htm?meal=1&userId="+n+"&itemId="+o;var d={url:s,type:"get",dataType:"jsonp",success:function(a){e&&e(a)},error:function(){t&&t()}};i&&a.mix(d,{jsonpCallback:"fromCdn",cache:!0}),new m(d)},extraOption:function(){var e=c("#tad_head_area"),a=c("#tad_first_area");0===e.length&&c('<div id="tad_head_area"></div>').insertBefore(a)},tadRequestCombo:function(e,a){var t=this;c("body").fire("resource:sib",{success:function(){var n=!!~location.href.indexOf("daily"),i=n?"//tad.daily.taobao.net":"//tad.taobao.com",o={};g_config.vdata&&g_config.vdata.viewer&&g_config.vdata.viewer.id?o.buyerid=g_config.vdata.viewer.id:o.buyerid=u.get("cna"),o.sellerid=g_config.sellerId,o.cna=u.get("cna"),o.itemid=g_config.itemId,o.catid=g_config.idata.item.cid,o.appid=1,o.areaid="tad_first_area",t.isDebug&&(o.debug=!0);var r=i+"/api/list";g_config&&g_config.sellerDetail&&g_config.sellerDetail.show&&(o.self=1),new m({url:r,type:"get",dataType:"jsonp",data:o,timeout:3e3,jsonp:"callback",error:function(){a&&a()},success:function(a){e&&e(a)}})}})},tadRequestCombo2:function(e,a){var t=!!~location.href.indexOf("daily"),n=t?"//tad.daily.taobao.net":"//tad.taobao.com",i={};g_config.vdata&&g_config.vdata.viewer&&g_config.vdata.viewer.id?i.buyerid=g_config.vdata.viewer.id:i.buyerid=u.get("cna"),i.sellerid=g_config.sellerId,i.cna=u.get("cna"),i.itemid=g_config.itemId,i.catid=g_config.idata.item.cid,i.appid=1,i.areaid="tad_first_area";var o=n+"/api/list";g_config&&g_config.sellerDetail&&g_config.sellerDetail.show&&(i.self=1),new m({url:o,type:"get",dataType:"jsonp",data:i,timeout:3e3,jsonp:"callback",error:function(){a&&a()},success:function(a){e&&e(a)}})},isAllTadModInited:function(e){var t=this;if(y++,y===e){var n=r.get(),i=n.tad_first_area.items,o=n.tad_first_area.showType;!b&&o&&a.inArray(parseInt(o),i)&&(t.goldLog(o),b=!0),p=!0,t.isAllModsLoaded()}},isAllUmpModInited:function(e){var a=this;h++,h===e&&(g=!0,a.isAllModsLoaded())},isAllModsLoaded:function(){p&&g&&c("body").fire("component:loaded",{name:"tad"})},goldLog:function(e){function a(e){var a=new Image;a.src=e}if(null===x||x!=e)try{x=e;var t="//gm.mmstat.com/shopflow.";if(4==e){var n=c(o.tad_first_area.items[4].container),i=n.attr("whichplan");if("default"==i)goldlog&&goldlog.record("/shopflow.5.1","","","H46807174");else if("custom"==i){var r=n.attr("taskid"),l=n.attr("templatetype");t+="3."+r+"?template="+l+"&t="+(new Date).getTime(),a(t)}}else if(12==e){if(c("#J_Tad1212 .tad12_guide_area").length||c("#J_Tad1212 .tad12_guide_success_tip").length)return;goldlog&&goldlog.record("/shopflow.5.2","","","H46807196")}}catch(s){c("body").fire("track",{msg:{url:location.href},category:"recommend:goldlog:false"})}}};return e=w}(),m=function(e){var a=v,t=x,n=g,i=o,s=_,d=KISSY,c=a.all,m=a.all("body"),u="loadDefaultData",f="tb-hidden",p=y,h=d.merge({},p.Target),b=t.extend({init:function(){this.render()},show:function(){n.removeClass(this.get("el"),f)},hide:function(){n.addClass(this.get("el"),f)},render:function(){var e=this,a=e.get("api"),t=e.get("data");h.on(u,function(e){new i({api:a,dataBox:"#J_BundleData",pageBox:"#J_BundlePage",meals:e.meals})}),m.on("load",function(a){var t=a.api,n=g_config.tadComponetCdn,i={url:t,type:"get",dataType:"jsonp",success:function(a){e.renderDefault(a)},error:function(){m.fire("track",{msg:{url:location.href,category:"recommend:request:false:matchingcombo"}});var a=e.get("errorFn");a&&a()}};n&&d.mix(i,{jsonpCallback:"fromCdn",cache:!0}),new s(i)}),e.renderDefault(t)},renderDefault:function(e){if(d.isPlainObject(e)&&e.data&&e.data.mealComponentBO){var t=this,n=t.get("container"),i=t.get("el"),o=[],r=[],l=t.get("renderDefault");l||(o=t.get("tpl"),r=e.data.mealComponentBO.meals,a.one(n).append(o({mealComponentBO:e.data.mealComponentBO})),n&&a.one(n).append(a.one(i)),t.set("renderDefault",!0)),o=t.get("tplCombo"),a.one("#J_BundleData").html(o({mealComponentBO:e.data.mealComponentBO})),t.show(),r.length&&h.fire(u,{meals:r}),window.DT&&DT.Messenger.fire("ui:tabbar:checkStick");var s=this.get("successFn");s&&s(),m.fire("loadsuccess")}else{var c=this.get("errorFn");c&&c(),m.fire("loaderror")}}},{ATTRS:{renderDefault:{value:!1},container:{value:""},errorFn:{valueFn:function(){}},successFn:{valueFn:function(){}},data:{value:""},el:{valueFn:function(){return c("#matching-combo")}},tpl:{value:r},tplCombo:{value:l},api:{valueFn:function(){var e=this,a=(e.get("daily"),e.get("userId")),t=e.get("itemId"),n=e.get("tadComponetCdn");return n?"//otds.alicdn.com/json/MMComponent.htm?meal=1&userId="+a+"&itemId="+t:"//detailskip.taobao.com/json/MMComponent.htm?meal=1&userId="+a+"&itemId="+t}},daily:{valueFn:function(){var e=!!~location.href.indexOf("daily");return e?"daily.taobao.net":"taobao.com"}},userId:{value:g_config.idata&&g_config.idata.seller&&g_config.idata.seller.id},itemId:{value:g_config.itemId},tadComponetCdn:{value:g_config.tadComponetCdn}}});return e=b}(),u=function(e){function a(e){var t=this;e.isDebug="3333"===location.port,a.superclass.constructor.call(t,e),t.init(e)}var t=KISSY,n=v,i=c,o=x,r=w;return a.ATTRS={},t.mix(a,r.Target),t.extend(a,o,{init:function(e){this.buildConfig(e),i.init(this.config)},buildConfig:function(e){this.config=t.mix(a.ATTRS,e,!0,null,!0)}}),"3333"===location.port&&n("body").on("resource:sib",function(e){e.success()}),e=a}(),f=function(e){return e=u}(),t.exports=f});