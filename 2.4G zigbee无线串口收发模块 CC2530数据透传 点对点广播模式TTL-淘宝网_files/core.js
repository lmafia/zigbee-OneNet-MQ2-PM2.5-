SNS=window.SNS||{},SNS.provide=function(a){"function"==typeof a&&(a=a());for(var b in a)void 0===this[b]&&(this[b]=a[b]);return this},SNS.provide({isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isPlainObject:function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)&&"isPrototypeOf"in a},mix:function(a,b,c){if(!b||!a)return a;for(var d in b)SNS.isPlainObject(b[d])?c?a[d]=this.mix(a[d]||{},b[d]):a[d]=b[d]:void 0!==b[d]&&(a[d]=b[d]);return a},each:function(a,b){if(SNS.isArray(a))for(var c=0;c<a.length;c++)b.call(a,a[c],c);else for(var d in a)b.call(a,a[d],d)},map:function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d]);return c}}),window.console||(window.console={},window.console.log=function(a){}),SNS.provide(function(){var a=-1!==location.search.indexOf("sns-debug"),b={log:function(b){a&&window.console&&console.log(b)},isDebug:function(){return a},guid:function(){return"sns"+(Math.random()*(1<<30)).toString(16).replace(".","")}};return b.extend=function(a,c){function d(){a.apply(this,arguments)}var e=Object.create||function(a){function b(){}return b.prototype=a,new b};return d.prototype=e(a.prototype),SNS.mix(d.prototype,c),d.prototype.constructor=d,d.superclass=a.prototype,d.extend=function(a){return b.extend(this,a)},d},b.buildURI=function(){var a=Array.prototype.slice.call(arguments);if(a.length<2)return a[0]||"";var b=a.shift();return b+=b.indexOf("?")>0?"&":"?",b+a.join("&").replace(/&+/g,"&")},b.addParams=b.buildURI,b}),SNS.provide(function(){var a=-1!==location.hostname.indexOf(".daily.")||"file:"==location.protocol,b={isDaily:function(){return a},domain:{assets:a?"assets.daily.taobao.net":"assets.alicdn.com",server:a?"daily.taobao.net":"taobao.com"},isTBDomain:function(){return-1!==location.hostname.indexOf(".taobao.")},normalize:function(a,c){return a=b.isDaily()?a.replace("assets.alicdn.com","assets.daily.taobao.net").replace("taobao.com","daily.taobao.net"):a.replace("assets.daily.taobao.net","assets.alicdn.com").replace("daily.taobao.net","taobao.com"),c?SNS.buildURI(a,"t="+KISSY.now()):a}};return b}),SNS.provide(function(){var a={SM:function(){window.UA_Opt&&window.ua||(window.ua="",window.UA_Opt={LogVal:"ua",MaxMCLog:2,MaxMPLog:2,MaxKSLog:2,Token:(new Date).getTime()+":"+Math.random(),SendMethod:8,Flag:14222},KISSY.getScript("//acjstb.aliyun.com/actionlog/js/ua.js",function(){try{UA_Opt.reload()}catch(a){}},"GBK"))},UA:function(){SNS.SM();var a=window.ua;return UA_Opt.Token=(new Date).getTime()+":"+Math.random(),UA_Opt.reload(),a}};return a}),SNS.provide(function(){function a(a,b){if(m.isFunction(a)&&(b=a,a=[]),b){var c=g(),d=c?c.src:l,d=d||"";p[d]=p[d]||{},m.mix(p[d],{url:d,deps:a,factory:b})}}function b(a,b,d){if(m.isFunction(a)?(b=a,a=[]):"string"==typeof a&&(a=a.replace(/\s+/g,""),a=a.split(",")),!a||0==a.length)return void(b&&b());d=d||{url:location.href};var e=0,f=[];m.each(a,function(g,h){c(g,function(c){f[h]=c,++e===a.length&&b&&b.apply(void 0,f)},d)})}function c(a,c,g){if(null==a)return c(null);for(var h=0;h<o.load.length;h++)if(o.load[h](a,c,g))return;var i=e(a,g&&g.url),j=p[i]=p[i]||{url:i};return j.callbacks?void("complete"==j.state?c&&c(j.exports):c&&j.callbacks.push(c)):(j.id=a,j.callbacks=[c],void f(i,function(){p[""]&&(m.mix(j,p[""]),p[""]=null),j.url=i,b(j.deps,function(){j.exports=d(j,arguments),j.state="complete",m.each(j.callbacks,function(a){a(j.exports)})},j)}))}function d(a,b){if(!(a.url.indexOf(".css")>-1)){if(m.isFunction(a.factory)){var c=a.factory.apply(a,b);return m.isFunction(c)&&(c.prototype.name=a.id.split("/").slice(-1).join("")),c}return a.factory}}function e(a,b){return b=b||r.base,0===a.indexOf("http://")||0===a.indexOf("https://")?a:(m.each(o.alias,function(b,c){a==c?a=b:0==a.indexOf(c+"/")&&(a=a.replace(c,b))}),m.each(o.map,function(b,c){m.isFunction(b)?a=b(a):m.isArray(b)&&(a=a.replace(b[0],b[1]))}),0===a.indexOf("./")&&(arr=b.split("/"),a=arr.slice(0,arr.length-1).concat(a.slice(2)).join("/")),0===a.indexOf("../")&&(arr=b.split("/"),a=arr.slice(0,arr.length-2).concat(a.slice(2)).join("/")),0!=a.indexOf("http")&&(a=o.base+a),a=a.replace(/([^:\/])\/+/g,"$1/"),-1==a.indexOf(".css")&&-1==a.indexOf("?")&&-1==a.indexOf("#")&&(a+=".js"),a+="?t="+o.timestamp)}function f(a,b){l=a,h(a,b),l=null}function g(){if(document.attachEvent){var a=document.getElementsByTagName("script");for(i=a.length-1;i>=0;i--)if("interactive"===a[i].readyState)return a[i]}}function h(a,b){if(a.indexOf(".css")>-1)return j(a,b);var c=document.createElement("script");return c.type="text/javascript",c.async=!0,c.attachEvent?c.attachEvent("onreadystatechange",function(){("loaded"===c.readyState||"complete"===c.readyState)&&b&&b()}):(c.addEventListener("load",b,!1),c.addEventListener("error",b,!1)),c.src=a,q.insertBefore(c,q.firstChild),c}function j(a,b){var c="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),d=document.createElement("link");d.type="text/css",d.rel="stylesheet",d.attachEvent||c?d.onload=d.onerror=b:k(d,b),d.href=a,q.appendChild(d)}function k(a,b){if(a.sheet){a._checkCounter=a._checkCounter||0;for(var c=document.styleSheets,d=0;d<c.length;d++){var e=c[d],f=e.ownerNode?e.ownerNode:e.owningElement;if(f&&f==a||a._checkCounter++>100)return void b()}}window.setTimeout(k,10,a,b)}var l,m=SNS,n=location.hostname.indexOf("taobao.net")>-1?"//g-assets.daily.taobao.net/tb/snsdk/0.0.11/":"//g.alicdn.com/tb/snsdk/0.0.11/",o={base:"",alias:{base:n,sns:n},map:[],load:[],timestamp:Math.floor((new Date).getTime()/864e5),skin:!0},p={},q=document.getElementsByTagName("head")[0],r=function(a,b){var c={};if(arguments.length>=2)c[a]=b;else{if(!m.isPlainObject(a))return o[a];c=a}for(var d in c)m.isPlainObject(o[d])?m.mix(o[d],c[d]):m.isArray(o[d])?o[d]=o[d].concat(c[d]):o[d]=c[d]};return b.resolve=e,{define:a,require:b,modules:p,configs:o,config:r}}),function(){SNS.config({load:function(a,b){return 0!==a.indexOf("kissy/")||"kissy/overlay"==a&&window.KISSY&&KISSY.version<"1.2.0"?void 0:(S.use(a.slice(6),function(a,c){b(c)}),!0)}})}(),function(){SNS.config({load:function(a,b,c){return a.indexOf(".css")>-1&&null===c.skin?(b(),!0):void 0}})}(),SNS.provide(function(){function a(a){var b=this;b.__init(a)}a.extend=function(b){return SNS.extend(a,b)},SNS.mix(a.prototype,{name:"widget",baseClassName:"sns",configs:{ui:{},callback:{}},__init:function(a){this._createWidget(a)},_createWidget:function(a){this._initConfigs(a),this._createElement(this.configs.element||this.configs.ui.element),this._create(),this._trigger("create",this.configs),this._init(),this._trigger("init",this.configs),this._addConfigListener()},_initConfigs:function(b){var c=SNS.mix({},a.prototype.configs,!0),d=SNS.mix(c,this.configs,!0);this.configs=SNS.mix(d,b,!0)},_setConfigs:function(a){var b=this;for(var c in a)b._setConfig(c,a[c]);return this},_setConfig:function(a,b){return this.configs[a]=b,this},_createElement:function(a){a&&SNS.isFunction(a)?this.element=a():a&&(this.element=KISSY.DOM.get(a)),this.element&&(KISSY.DOM.addClass(this.element,"sns-"+this.name),KISSY.DOM.addClass(this.element,"sns-widget-ui")),this.element&&(this.element.__sns_widget=this)},_create:function(){},_init:function(){},_addConfigListener:function(){var a,b,c=this.listeners,d=this;for(var a in c)b=c[a],function(a,b){KISSY.Event.on(d.element,a,function(){b.apply(d,arguments)})}(a,b)},destroy:function(){this.element&&(KISSY.Event.detach(this.element),KISSY.DOM.removeData(this.element,"data-"+this.baseClassName),KISSY.DOM.removeClass(this.element,this.baseClassName)),this.hide(),this._trigger("destroy")},config:function(a,b){var c=a;if(0===arguments.length)return SNS.mix({},this.configs);if("string"==typeof a){if(void 0===b)return this.configs[a];c={},c[a]=b}return this._setConfigs(c),this},show:function(){this.element&&(this.element.style.display=""),this._trigger("show")},hide:function(){this.element&&(this.element.style.display="none"),this._trigger("hide")},_trigger:function(a,b){var c=this.configs.callback[a];SNS.isFunction(c)&&c.call(this,b)},$:function(a){return KISSY.all(this.element).all(a)}});var b=function(b,c){return SNS.isFunction(b)?void SNS.extend(b,c):a.extend(b)};return{createWidget:b}}),SNS.provide(function(){var a=function(a,b,c){if(null!=a){/^sns/.test(a)||(a="sns/widget/"+a),SNS.isFunction(b)&&(c=b,b={}),b=SNS.mix({},b,!0),b.name=a,b.ui=b.ui||{},b.callback=b.callback||{};var d=b.element||b.ui.element||document.body;if(KISSY.DOM.test(d,"iframe")||b.ui.isIframe===!0)return SNS.require(["sns/core/iframecross"],function(a){a.crossByIframe(d,b,c)}),!0;if(null===b.skin||null===b.ui.skin){var e=SNS.require.resolve(b.name);SNS.modules[e]=SNS.modules[e]||{},SNS.modules[e].skin=null}SNS.require(a,function(a){try{var d=new a(b);c&&c(d)}catch(e){}})}};return{ui:a}}),SNS.config("logintime",(new Date).getTime()),SNS.provide({checkLogin:function(a){if(-1==location.href.indexOf("taobao"))return!1;var b,c=function(a){var b,c;return(c=String(document.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(b=c[1]?decodeURIComponent(c[1]):""),b};b=a?c("_l_g_")&&c("_nk_")||c("ck1")&&c("tracknick")||c("lgc"):c("_l_g_")&&c("_nk_")||c("ck1")&&c("tracknick");var d=((new Date).getTime()-SNS.config("logintime"))/6e4;return d>30&&(b=!1),!!b},_getDOMToken:function(){var a=document.getElementsByName("_tb_token_")[0];return a&&a.value?a.value:SNS._tb_token?SNS._tb_token:void 0},_setDOMToken:function(a){var b=document.getElementsByName("_tb_token_");b||(b=document.createElement("input"),b.type="hidden",b.name="_tb_token_",document.body.appendChild(b)),b.value=a},fetchToken:function(a,b){var c=this,d=SNS.config("token")||SNS._getDOMToken();if(d&&!b)return void(a&&a(d));if(SNS.isTBDomain()||b)SNS.ajax({_fetchToken:!0,url:"//comment.jianghu.taobao.com/json/token.htm",success:function(b){b=b&&b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""),SNS.config("token",b),c._setDOMToken(b),SNS._tb_token=b,a&&a(b)}});else if(!SNS.isTBDomain()||b){var e;e=-1!==location.hostname.indexOf(".daily.")||"file:"==location.protocol?"//comment.jianghu.daily.taobao.net/json/token.htm":"//comment.jianghu.taobao.com/json/token.htm",SNS.ajax({use:"jsonp",dataType:"jsonp",url:e,data:{_fetchToken:!0},success:function(b){var c=b.token;SNS.config("token",c),SNS._tb_token=c,a&&a(c)}})}else a&&a("")},login:function(a,b,c){var d,e,f=340,g=360;return SNS.checkLogin(c)&&!b?void(a&&a()):(SNS.isTBDomain()||(e=!0),void SNS.ui("login",{logintime:SNS.config("logintime"),force:b||!1,ui:{isIframe:e,type:"iframePopup",isIframeShow:!1,width:f,height:g},isLow:c,callback:{check:function(b){b.isLogin?a&&a():d&&d.style&&(d.style.display="block")},success:function(){a&&a()}}},function(a){d=a}))}}),SNS.provide(function(){var a={};return a.goldlog=function(a){(new Image).src="//gm.mmstat.com/"+a+"?cache="+(new Date).getTime()},a.storage=function(a,b){if(window.localStorage){if(!(arguments.length>1))return localStorage.getItem(a);localStorage.setItem(a,b)}else{var c=document.documentElement;try{if(c.style.behavior||(c.style.behavior="url(#default#userData)"),!(arguments.length>1))return c.load("sns"),c.getAttribute(a);c.setAttribute(a,b),c.save("sns")}catch(d){}}},a.removeStorage=function(a){if(window.localStorage)return localStorage.removeItem(a);var b=document.documentElement;try{b.style.behavior||(b.style.behavior="url(#default#userData)"),b.save("sns",!1,-365)}catch(c){}},a.alert=function(a,b,c,d,e){var e=e||{};SNS.ui("sns/core/alert",{msg:a,callback:b,autoHide:d,customCls:c,ui:{width:e.width||900,height:e.height||400,type:"iframePopup"},align:e.align||{node:null,points:["cc","cc"],offset:[0,0]}})},a.confirm=function(a,b,c,d){var d=d||{};SNS.ui("sns/core/confirm",{msg:a,callback:b,customCls:c,ui:{width:d.width||900,height:d.height||400,type:"iframePopup"},align:d.align||{node:null,points:["cc","cc"],offset:[0,0]}})},a.fixHover=function(a,b){KISSY.UA.ie<=6&&(b=b||"hover",KISSY.DOM.query(a).each(function(a){KISSY.Event.on(a,"mouseenter",function(){KISSY.DOM.addClass(a,b)}),KISSY.Event.on(a,"mouseleave",function(){KISSY.DOM.removeClass(a,b)})}))},SNS.each({api:"sns/core/api",ajax:"sns/core/ajax",get:"sns/core/ajax",post:"sns/core/ajax",overlayAdapt:"sns/core/overlay",placeholder:"placeholder"in document.createElement("input")?"":"sns/util/placeholder",maxlength:"maxLength"in document.createElement("textarea")?"":"sns/util/maxlength"},function(b,c){a[c]=function(){if(""!=b){var a=arguments;SNS.require(b,function(b){var d=b[c]||b;d.apply(b,a)})}}}),a}),SNS.provide(function(){function a(a){return a.replace(/^\s+|\s+$/gm,"")}function b(b){return"string"==typeof b&&b?(b=a(b),/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/(?:'|")[^'"\\\n\r]*('|")|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,":").replace(/\w*\s*\:/g,":"))?new Function("return "+b)():{}):{}}function c(c){c=a(c.replace(/\(|\]\.|\+|\)|\\|new\s/g,"@"));try{return b(c)}catch(d){}}function d(a){if(!a._sns_widget_init){a._sns_widget_init=!0;for(var b=a.attributes,d=0;d<b.length;d++){var e=b[d].name,f=b[d].value;if(/^data-/.test(e)){var g=f&&c(f);KISSY.isEmptyObject(g)||(g.element=a,SNS.ui(e.slice(5).replace("-","/"),g))}}}}function e(a){if(document.getElementsByClassName)return document.getElementsByClassName(a);if(document.querySelectorAll)return document.querySelectorAll("."+a);for(var b=[],c=document.getElementsByTagName("*"),d=0;d<c.length;d++)f(c[d],a)&&b.push(c[d]);return b}function f(a,b){return(" "+a.className+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1}function g(a){var b=!1;try{KISSY.ready(function(){b||(a(),b=!0)})}catch(c){h(function(){b||(a(),b=!0)})}}function h(a){function b(){"complete"===d.readyState&&a()}function c(){try{f("left"),a()}catch(b){setTimeout(c,40)}}var d=document,e=window;if("complete"===d.readyState)a();else if(d.addEventListener)d.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{d.attachEvent("onreadystatechange",b),e.attachEvent("onload",a);var f=d.documentElement.doScroll;f&&c()}}var i="sns-widget";return g(function(){setTimeout(function(){for(var a=e(i),b=0;b<a.length;b++)d(a[b])})}),{active:d}}),SNS.provide(function(){function a(a){return window.KISSY?void b(a):null!=g?void g.push(a):(g=[a],void setTimeout(function(){return window.KISSY?b():void c(f,function(){KISSY.Config.base=f.substring(0,f.lastIndexOf("/")+1),b()})},10))}function b(a){SNS.each(d,function(a){SNS[a]=e[a]});for(var b=0;b<g.length;b++)g[b]();a&&a()}function c(a,b){var c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.attachEvent?c.attachEvent("onreadystatechange",function(){("loaded"===c.readyState||"complete"===c.readyState)&&b&&b()}):(c.addEventListener("load",b,!1),c.addEventListener("error",b,!1)),c.src=a;var d=document.getElementsByTagName("head")[0];return d.insertBefore(c,d.firstChild),c}if(!window.KISSY){var d=["require","ui","fixHover"],e={};SNS.each(d,function(b){e[b]=SNS[b],SNS[b]=function(){var c=this,d=arguments;a(function(){e[b].apply(c,d)})}});var f="//assets.alicdn.com/s/kissy/1.2.0/kissy-min.js",g=null}});