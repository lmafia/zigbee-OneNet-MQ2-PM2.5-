!function(e){function t(t,o){var n=g_config.ver||"";if(e.indexOf(location.host,u)!==-1)alert(t.message);else{var a={key:s,name:t.name,message:t.message,stack:t.stack||"",custom:o||"",v:n,t:e.now()};window.__logs&&(a.logs=window.__logs.toString());var i=l+"?"+e.param(a);(new Image).src=i}}var o=location.host.indexOf("daily")>-1?"//g-assets.daily.taobao.net":"//g.alicdn.com",n="tb",a="item-detail",i=g_config.ver,r=[o,n,a,i].join("/"),c="tbdetail",s=c+".err",l="//poc.taobao.com/1.gif",u=["item.daily.taobao.net","miao.item.daily.taobao.net","pre-item.taobao.com","itempre.taobao.com","itempre1.taobao.com","itempre2.taobao.com","itempre3.taobao.com","detailpre.taobao.com","detaildaily.taobao.net"],m="ks-debug";try{if(!window.matchMedia&&window.screen.width<1180){var d=document.createElement("link");d.rel="stylesheet",d.href=r+"/index-1179-min.css";var f=document.getElementsByTagName("head")[0];f.appendChild(d)}}catch(p){}!function(){var o=e.Loader||{},n=o.Utils||{};n.attachMod=function(a,i){var r,c=i.factory;if("function"==typeof c){var s;i.requires&&i.requires.length&&(s=e.bind(i.require,i));try{r=c.apply(i,i.cjs?[a,s,i.exports,i]:n.getModules(a,i.getRequiresWithAlias()))}catch(l){t(l,i.name),setTimeout(function(){throw l.stack},1)}void 0!==r&&(i.exports=r)}else i.exports=c;i.status=o.Status.ATTACHED}}(),function g(){function t(e){"object"==typeof e&&(e=e[y]||e[v]);var t=l?d:f;return t+e}var o={base:r,ignorePackageNameInUri:!0};if(e.indexOf(location.hostname,u)!==-1){var n=location.href.replace(/#.*/gi,""),i=e.unparam(n.split("?")[1]);i._path&&(i._base=i._path);for(var c in o)i["_"+c]&&(o[c]=i["_"+c])}var s=i&&m in i,l=!!~location.hostname.indexOf("daily"),d="//g-assets.daily.taobao.net/",f="//g.alicdn.com/",p="daily",h="pre",v="pub",y=location.host.indexOf(p)>-1?p:location.host.indexOf(h)>-1?h:v;location.href.indexOf("env="+v)>-1&&(y=v);var _={};_[a]=o;var g={combine:!s,packages:_},b={packages:{tbc:{base:t("tbc/"),ignorePackageNameInUri:!0},tb:{base:t("tb/"),ignorePackageNameInUri:!0},kg:{base:t("kg/"),ignorePackageNameInUri:!0},"address-detail":{base:t("ccc/address-detail/2.0.3/"),debug:!0,ignorePackageNameInUri:!0},wangpu:{base:t("shop/wangpu/1.9.4/"),ignorePackageNameInUri:!0,charset:"utf-8",tag:"20140523"}},modules:{"item-detail/index":{requires:["core","overlay","xtemplate","imagezoom","switchable","datalazyload","sku","log"]},sku:{alias:["kg/sku/6.2.0/"]},log:{alias:["tbc/log/0.4.1/"]},slide:{alias:["kg/slide/2.0.2/"]},header:{alias:["kg/header/1.4.2/"]},rate:{alias:["kg/rate/0.1.1/"]},favorite:{alias:["kg/favorite/"+(g_config.favoriteVersion?g_config.favoriteVersion:"1.1.0")+"/"]},"address-detail/wlroute":{requires:["node","io","xtemplate","overlay","event","address-detail/wlroute.css"]},seckill:{alias:["tb/item-seckill/0.0.7/"]},records:{alias:["tb/item-records/0.0.4/"]}}};"undefined"!=typeof Config&&(g=e.mix(g,Config,{deep:!0})),y===v&&(g=e.mix(g,b,{deep:!0})),e.config(g)}()}(KISSY),function(S){function getElementsByClassName(e){if(document.getElementsByClassName)return document.getElementsByClassName(e);for(var t=[],o=document.getElementsByTagName("*"),n=0,a=o.length;n<a;n++){var i=o[n];RegExp("(^|\\s)"+e+"(\\s|$)").test(i.className)&&t.push(i)}return t}function addEvent(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,function(t){var t=t||window.event;t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},o.call(e,t)})}function each(e,t){for(var o=0,n=e.length;o<n;o++)t(e[o],o)}function now(){return g_config.vdata.sys.now}function toArray(e){for(var t=0,o=e.length,n=[];t<o;t++)n[t]=e[t];return n}function querySelectorAll(e){var t=[];if(document.querySelectorAll)t=document.querySelectorAll(e);else{var o=e.match(classReg);if(o){var n=o[1];t=getElementsByClassName(n)}else{e=e.slice(1);var a=document.getElementById(e);a&&t.push(a)}}return toArray(t)}function initComponent(component,Component){if(component.init)eval(component.init);else if(Component&&Component.init){var config=g_config;component.config&&(config=eval(component.config)),Component.init(config)}}function getPath(e){return e.path}function isScript(e){return e&&e.match(/(https?:)?\/\//)}function loadComponent(e,t){var o=getPath(e);if(o&&!e.loaded){e.loaded=!0;var n=function(o,n){e.defer?setTimeout(function(){initComponent(e,n)},20):initComponent(e,n),t&&t(o,n)};isScript(o)?KISSY.getScript(o,n):KISSY.use(o,n)}}function loadBootstrapComponents(e){each(e,function(e){loadComponent(e)})}function loadMainComponents(e,t){var o=[],n=[];each(e,function(e){var t=getPath(e);isScript(t)?n.push(t):o.push(t)}),KISSY.use(o,{success:t,error:function(){each(e,function(e){loadComponent(e)})}}),each(n,function(e){KISSY.getScript(e)})}function loadCoreComponents(e){each(e,function(e){loadComponent(e)})}function loadLazyComponents(e){var t="mouseenter",o="mouseleave",n="click",a="hover",i="key",r="scroll",c="time",s=200;each(e,function(e){var l=e.trigger,u=l.split(":"),m=u[0],d=u[1];if(n===m){var f=querySelectorAll(d);each(f,function(t){addEvent(t,n,function(){loadComponent(e)})})}else if(a===m){var f=querySelectorAll(d);each(f,function(n){var a=null;addEvent(n,t,function(){a=setTimeout(function(){a=null,loadComponent(e)},s)}),addEvent(n,o,function(){a&&clearTimeout(a)})})}else if(r===m){var f=querySelectorAll(d);each(f,function(t){Viewport.watch(t,function(){loadComponent(e)})})}else if(c===m)setTimeout(function(){loadComponent(e)},Number(d));else if(i===m){var p={ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey",meta:"metaKey"},g=function(e,t){var o=t.replace(/\s/g,"").toLowerCase().split("+"),n=0;return each(o,function(t){var o=p[t];o?e[o]&&n++:Number(t)===e.keyCode&&n++}),o.length===n};addEvent(document,"keydown",function(t){var o=t.target,n=d.tagName;g(t,d)&&"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!o.isContentEditable&&(t.preventDefault(),loadComponent(e))})}})}function loadComponents(){function e(){e.loaded||(e.loaded=!0,loadCoreComponents(coreComponents),loadLazyComponents(lazyComponents))}loadBootstrapComponents(bootstrapComponents),loadMainComponents(mainComponents,function(){navigator.userAgent.toLowerCase().indexOf("ie")>-1?(each(["mouseenter","mousemove","scroll","click"],function(t){addEvent(document.body,t,e)}),addEvent(window,"keydown",e)):e()})}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var classReg=/^\.([\w\-]+)$/;Viewport=function(){function e(){function e(e,t,o){function n(){a&&(a.cancel(),a=0),i=S.now(),e.apply(o||this,arguments),r=S.now()}var a,i=0,r=0;return t=t||150,S.mix(function(){!i||r>=i&&S.now()-r>t||r<i&&S.now()-i>8*t?n():(a&&a.cancel(),a=S.later(n,t,0,null,arguments))},{stop:function(){a&&(a.cancel(),a=0)}})}function t(e){return e._ks_lazy_width?e._ks_lazy_width:e._ks_lazy_width=r.outerWidth(e)}function o(e){return e._ks_lazy_height?e._ks_lazy_height:e._ks_lazy_height=r.outerHeight(e)}function n(e,n,i){if(!e.offsetWidth)return!1;var c,s=r.offset(e),l=!0,u=s.left,m=s.top,d={left:u,top:m,right:u+t(e),bottom:m+o(e)};return c=a(n,d),c&&i&&(l=a(i,d)),l&&c}function a(e,t){var o={};return o.top=Math.max(e.top,t.top),o.bottom=Math.min(e.bottom,t.bottom),o.left=Math.max(e.left,t.left),o.right=Math.min(e.right,t.right),o.bottom>=o.top&&o.right>=o.left}function i(e){var t=this;return t instanceof i?(e&&(t.container=e),t._callbacks={},t._containerIsNotDocument=9!==t.container.nodeType,t._initLoadEvent(),void t.resume()):new i(e)}var r=KISSY.require("dom"),c=KISSY.require("event"),s=window,l=s.document,u="data-lazy",m="default",d="scroll",f="touchmove",p="resize",g=100,h=0;return i.prototype={diff:m,placeholder:"//g.alicdn.com/s.gif",container:l,autoDestroy:!0,lazyHandle:function(e){var t=e.getAttribute(u),o=e.getAttribute(u+"-"+t);if(t&&o){var n=e.getAttribute(t);n!==o&&e.setAttribute(t,o),e.removeAttribute(u)}},_initLoadEvent:function(){var t=this,o=t.autoDestroy;t._loadFn=e(function(){o&&0===t._counter&&S.isEmptyObject(t._callbacks)&&t.destroy(),t._loadItems()},g,t)},refresh:function(){this._loadFn()},_loadItems:function(){var e=this,t=e.container;e._containerIsNotDocument&&!t.offsetWidth||(e._windowRegion=e._getBoundingRect(),!e._backCompact&&e._containerIsNotDocument&&(e._containerRegion=e._getBoundingRect(e.container)),S.each(e._callbacks,function(t,o){t&&e._loadItem(o,t)}))},_loadItem:function(e,t){var o=this,t=t||o._callbacks[e];if(!t)return!0;var a=t.el,i=!1,r=t.fn;if(o.force||n(a,o._windowRegion,o._containerRegion))try{i=r.call(a,a)}catch(c){setTimeout(function(){throw c},0)}return i!==!1&&delete o._callbacks[e],i},add:function(e,t){e=r.get(e);var o=this,n=o._callbacks,a={el:e||document,fn:t||o.lazyHandle},i=++h;n[i]=a,o._windowRegion?o._loadItem(i,a):o.refresh()},remove:function(e,t){e=r.get(e);var o=this._callbacks;S.each(o,function(n,a){n.el===e&&(t?n.fn===t:1)&&delete o[a]})},_getBoundingRect:function(e){var t,o,n,a;if(void 0!==e){t=r.outerHeight(e),o=r.outerWidth(e);var i=r.offset(e);n=i.left,a=i.top}else t=r.viewportHeight(),o=r.viewportWidth(),n=r.scrollLeft(),a=r.scrollTop();var c=this.diff,s=c===m?o:c,l=0,u=s,d=c===m?t:c,f=0,p=d,g=n+o,h=a+t;return S.isObject(c)&&(l=c.left||0,u=c.right||0,f=c.top||0,p=c.bottom||0),n-=l,g+=u,a-=f,h+=p,{left:n,top:a,right:g,bottom:h}},pause:function(){var e=this,t=e._loadFn;if(!e._destroyed&&(c.remove(s,d,t),c.remove(s,f,t),c.remove(s,p,t),t.stop(),e._containerIsNotDocument)){var o=e.container;c.remove(o,d,t),c.remove(o,f,t)}},resume:function(){var e=this,t=e._loadFn;if(!e._destroyed&&(c.on(s,d,t),c.on(s,f,t),c.on(s,p,t),e._containerIsNotDocument)){var o=e.container;c.on(o,d,t),c.on(o,f,t)}},destroy:function(){var e=this;e.pause(),e._callbacks={},e._destroyed=1}},new i}var t;return{watch:function(o,n){t||(t=e()),t.add(o,n)}}}();var components=[];try{each(Components,function(component){if(!(component.start&&new Date(component.start)>now()||component.end&&new Date(component.end)<now()))if(component.precondition)try{eval(component.precondition)&&components.push(component)}catch(e){}else components.push(component)})}catch(e){}var bootstrapComponents=[],mainComponents=[{name:"detail",path:"item-detail/index",load:"main"}],coreComponents=[],lazyComponents=[];each(components,function(e){var t=e.load;"bootstrap"===t?bootstrapComponents.push(e):"main"===t?mainComponents.push(e):"lazy"===t&&e.trigger?lazyComponents.push(e):coreComponents.push(e)}),loadComponents()}(KISSY);