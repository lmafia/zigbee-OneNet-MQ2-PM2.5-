KISSY.add("kg/tbar/2.6.1/toolbar-xtpl",function(t,e,a,i){var o=function(t){var e=this,a=e.root,i=e.buffer,o=e.scope,n=(e.runtime,e.name,e.pos,o.data,o.affix,a.nativeCommands),r=a.utils;r.callFn,r.callDataFn,r.callCommand,n.range,n.foreach,n.forin,n.each,n["with"],n["if"],n.set,n.include,n.parse,n.extend,n.block,n.macro,n["debugger"];return i.data+='<div class="tb-toolbar tb-toolbar-shrinked" id="J_Toolbar" role="toolbar" data-spm="630"></div>\n',i};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/toolbar-list-xtpl",function(t,e,a,i){var o=function(t){var e=this,a=e.root,i=e.buffer,o=e.scope,n=(e.runtime,e.name,e.pos,o.data,o.affix,a.nativeCommands),r=a.utils;r.callFn,r.callDataFn,r.callCommand,n.range,n.foreach,n.forin,n.each,n["with"],n["if"],n.set,n.include,n.parse,n.extend,n.block,n.macro,n["debugger"];return i.data+='<ul class="tb-toolbar-list"></ul>',i};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/ww/ww-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos),l=n.data,s=n.affix,c=i.nativeCommands,d=i.utils;d.callFn,d.callDataFn,d.callCommand,c.range,c.foreach,c.forin,c.each,c["with"],c["if"],c.set,c.include,c.parse,c.extend,c.block,c.macro,c["debugger"];o.data+='<li class="tb-toolbar-item" data-item="';var b=(e=s.name)!==t?e:(e=l.name)!==t?e:n.resolveLooseUp(["name"]);o=o.write(b),o.data+='">\n    <span class="J_WangWang" data-nick="',r.line=2;var u=(e=s.nick)!==t?e:(e=l.nick)!==t?e:n.resolveLooseUp(["nick"]);return o=o.writeEscaped(u),o.data+='" data-icon="small" data-display="inline" data-encode="true"></span>\n    <a href="#" data-spm-click="gostr=/tbdetail;locaid=d1" class="tb-toolbar-item-hd tb-toolbar-item-hd-ww tb-toolbar-ww-offline" onclick="javascript:window.goldlog && goldlog.record && goldlog.record(\'/tbact.1212.12306.12\',\'\',\'\',\'H47641344\')">\n        <div class="tb-toolbar-item-icon">&#xf176;</div>\n        <div class="tb-toolbar-item-tip">\u5ba2\u670d<div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n    <div class="tb-toolbar-item-bd">\n    </div>\n</li>\n',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/ww/ww",["./ww-xtpl"],function(t,e){function a(e){var a=e.split(".");return t.reduce(a,function(t,e){return"undefined"==typeof t?t:t[e]},window)}function i(t,e,i){if(a(t))i();else var o=setInterval(function(){a(t)&&(clearInterval(o),i())},e)}var o=e("./ww-xtpl"),n="";"undefined"!=typeof g_config&&(n=g_config.sellerNick);var r={nick:encodeURIComponent(n)},l="tb-toolbar-ww-offline";return{tpl:o,data:{nick:r.nick},listeners:{afterRender:function(e){var a=this,o=a.getItemEl(e);i("Light",200,function(){function i(){var n=t.one(".ww-light a",o);n&&n.length?n.hasClass("ww-online")?a.getItemHdEl(e).removeClass(l):n.hasClass("ww-offline")||setTimeout(i,200):setTimeout(i,200)}Light.light("#J_Toolbar"),t.one(".ww-light a",o)?i():setTimeout(i,200)}),setTimeout(function(){var e=t.one(".ww-light a",o);e&&e.length&&!e.hasClass("ww-online")&&!e.hasClass("ww-offline")&&Light.light("#J_Toolbar")},5e3)},click:function(e){t.one(".ww-light a",this.getItemEl(e)).fire("click")}},config:r}}),KISSY.add("kg/tbar/2.6.1/items/feedback/feedback-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos,n.data),l=n.affix,s=i.nativeCommands,c=i.utils;c.callFn,c.callDataFn,c.callCommand,s.range,s.foreach,s.forin,s.each,s["with"],s["if"],s.set,s.include,s.parse,s.extend,s.block,s.macro,s["debugger"];o.data+='<li class="tb-toolbar-item" data-item="';var d=(e=l.name)!==t?e:(e=r.name)!==t?e:n.resolveLooseUp(["name"]);return o=o.write(d),o.data+='">\n    <a href="#" class="tb-toolbar-item-hd" data-spm-click="gostr=/tbdetail;locaid=d5">\n        <div class="tb-toolbar-item-icon">&#xf177;</div>\n        <div class="tb-toolbar-item-tip"><span class="tb-toolbar-item-tip-text">\u53cd\u9988</span><div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n</li>\n',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/feedback/feedback",["./feedback-xtpl"],function(t,e){var a=e("./feedback-xtpl"),i={url:""};return{tpl:a,data:{},listeners:{afterRender:function(t,e){var a=this;if(i.tip){var o=a.getItemEl(t);o.one(".tb-toolbar-item-tip-text").html(i.tip)}},click:function(e,a){var o=i.url;o&&(t.isFunction(i.url)?i.url(a):window.open(o))},message:{updateConfig:function(e,a){t.mix(i,a)}}},config:i}}),KISSY.add("kg/tbar/2.6.1/items/gotop/gotop-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos,n.data),l=n.affix,s=i.nativeCommands,c=i.utils;c.callFn,c.callDataFn,c.callCommand,s.range,s.foreach,s.forin,s.each,s["with"],s["if"],s.set,s.include,s.parse,s.extend,s.block,s.macro,s["debugger"];o.data+='<li class="tb-toolbar-item tb-toolbar-item-gototop" data-item="';var d=(e=l.name)!==t?e:(e=r.name)!==t?e:n.resolveLooseUp(["name"]);return o=o.write(d),o.data+='">\n    <a href="#" class="tb-toolbar-item-hd tb-toolbar-item-hd-gototop" data-spm-click="gostr=/tbdetail;locaid=d4">\n        <div class="tb-toolbar-item-icon">&#xf178;</div>\n        <div class="tb-toolbar-item-tip"><span class="tb-toolbar-item-tip-text">\u8fd4\u56de\u9876\u90e8</span><div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n</li>\n',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/gotop/gotop",["node","./gotop-xtpl"],function(t,e){var a=(e("node").all,e("./gotop-xtpl")),i={scrollTop:1,animation:!1,easing:"easeBoth",duration:.5,complete:t.noop};return{tpl:a,data:{},listeners:{afterRender:function(t,e){var a=this;if(i.tip){var o=a.getItemEl(t);o.one(".tb-toolbar-item-tip-text").html(i.tip)}},click:function(){window.scrollTo(0,1)}},config:i}}),KISSY.add("kg/tbar/2.6.1/items/cart/counter",["io","cookie","node"],function(t,e){function a(e){return c.userCookie&&"2"==c.userCookie.version?t.unparam(e,"&amp;"):t.unparam(e)}function i(e){var a=s(".J_ToolbarCartNum");return t.isNumber(e)?void(e<0?(x=e===-1,a.hide()):a.text(e).show()):void a.hide()}function o(t){if(t=t||0){var e={keys:"TCART_234_"+t+"_q"};new r({type:"get",url:w,data:e,success:function(t){if(t){var a=h>=0?h:d?1:0;i(t[e.keys]),l.set("mt","ci="+t[e.keys]+"_"+a+(v?"&"+v:""),7,m)}else d()&&o()},dataType:"jsonp",cache:!1})}else new r({type:"get",url:k+(u?"&appid="+u:""),success:i,dataType:"jsonp",cache:!1})}function n(){var t=s("#J_MiniCartNum"),e=0;if(t.length&&(e=parseInt(t.text(),10)),e>0)i(e);else if(d())f?1==h?i(p):o():o(l.get("unb"));else{var a=l.get("t");a?p>=0?i(p):o(a):i(0)}}var r=e("io"),l=e("cookie"),s=e("node").all,c=window,d=function(){var t=l.get("_nk_")||l.get("tracknick"),e=l.get("_l_g_"),a=l.get("lgc");return!!(e&&t||a)},b=!!~location.hostname.indexOf("daily.taobao.net"),u="g_config"in c&&"appId"in c.g_config?parseInt(c.g_config.appId):void 0,m=b?".daily.taobao.net":".taobao.com",f=a(l.get("mt")),g=f&&f.ci?f.ci.split("_"):[void 0,void 0],p=parseInt(g[0],10),h=parseInt(g[1],10),v=f?f.cp:void 0,k="//cart"+m+"/top_cart_quantity.htm?",w="//count."+(b?"config-vip.taobao.net:8888":"taobao.com")+"/counter6",x=p<0;return{init:n,num:i}}),KISSY.add("kg/tbar/2.6.1/items/cart/cart-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos,n.data),l=n.affix,s=i.nativeCommands,c=i.utils;c.callFn,c.callDataFn,c.callCommand,s.range,s.foreach,s.forin,s.each,s["with"],s["if"],s.set,s.include,s.parse,s.extend,s.block,s.macro,s["debugger"];o.data+='<li class="tb-toolbar-item tb-toolbar-item-cart" data-item="';var d=(e=l.name)!==t?e:(e=r.name)!==t?e:n.resolveLooseUp(["name"]);return o=o.write(d),o.data+='">\n    <a href="#" class="tb-toolbar-item-hd tb-toolbar-item-hd-cart J_TBToolbarCart" data-spm-click="gostr=/tbdetail;locaid=d2" >\n        <div class="tb-toolbar-item-icon tb-toolbar-item-icon-cart">&#xf179;</div>\n        <div class="tb-toolbar-item-label tb-toolbar-item-label-cart">\u8d2d\u7269\u8f66</div>\n        <div class="J_ToolbarCartNum tb-toolbar-item-badge-cart">0</div>\n        <div class="tb-toolbar-item-tip">\u6211\u7684\u8d2d\u7269\u8f66<div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n    <div class="tb-toolbar-item-bd tb-toolbar-mini-cart tb-toolbar-loading">\n    </div>\n</li>\n',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/cart/cart",["node","./counter","./cart-xtpl"],function(t,e){var a=e("node").all,i=e("./counter"),o=e("./cart-xtpl"),n=a("body"),r="2.7.3";return{tpl:o,config:{login:"click",goldlog:["/sidebar.1001.104","","","H46926362"]},data:{},listeners:{message:{fly:function(t,e){var a=this;e.$target=a.getItemHdEl(t),a.fly(e)},num:function(t,e){i.num(e.num)}},afterRender:function(t){var e=this,a=e.getItemEl(t),o=e.getItemBdEl(t);a.delegate("click",".J_ShrinkMiniCartToolBar",function(a){a.preventDefault(),"none"===o.css("display")?e.expand(t,{el:o}):e.shrink()}),n.on("toolbar:login",function(){i.init()}),i.init()},click:function(t,e){var i=e.currentTarget;try{goldlog.record("/sidebar.1001.104","","","H46926362")}catch(o){}this.expand(t,{el:a(i).next()})},expand:function(e,a){a.el.show(),t.use("tp/tb-mini-cart/"+r+"/plugin/toolbar/index",function(t,e){e.init({container:a.el,success:function(){a.el.removeClass("tb-toolbar-loading")},error:function(t){a.el.removeClass("tb-toolbar-loading")}})})},shrink:function(t,e){e.el.hide(),e.el.html(""),e.el.addClass("tb-toolbar-loading")}}}}),KISSY.add("kg/tbar/2.6.1/items/history/history-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos,n.data),l=n.affix,s=i.nativeCommands,c=i.utils;c.callFn,c.callDataFn,c.callCommand,s.range,s.foreach,s.forin,s.each,s["with"],s["if"],s.set,s.include,s.parse,s.extend,s.block,s.macro,s["debugger"];o.data+='<li class="tb-toolbar-item tb-toolbar-history" data-item="';var d=(e=l.name)!==t?e:(e=r.name)!==t?e:n.resolveLooseUp(["name"]);return o=o.write(d),o.data+='">\n    <a href="#" class="tb-toolbar-item-hd" data-spm-click="gostr=/tbdetail;locaid=d6">\n        <div class="tb-toolbar-item-icon">&#xe606;</div>\n        <div class="tb-toolbar-item-tip">\u6211\u7684\u8db3\u8ff9<div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n    <div class="tb-toolbar-item-bd tb-toolbar-loading">\n    </div>\n</li>\n',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/history/history",["node","./history-xtpl"],function(t,e){var a=e("node"),i={login:"click",goldlog:["/sidebar.1001.106","","","H46926364"]};return{tpl:e("./history-xtpl"),config:i,data:{},listeners:{afterRender:function(t){var e=this,a=e.getItemEl(t);e.getItemBdEl(t);a.delegate("click",".J_Shrink",function(t){t.preventDefault(),e.shrink()})},click:function(t,e){var i=a.one(e.currentTarget);try{goldlog.record("/sidebar.1001.106","","","H46926364")}catch(o){}this.expand(t,{node:i.next()})},expand:function(e,a){var i=this,o=i.getItemBdEl(e);o.show(),t.use("act20141212/c/2014-1212/sidebar/history/",function(t,n){n.render(o,function(){o.removeClass("tb-toolbar-loading")},function(n){o.removeClass("tb-toolbar-loading"),n&&1===n.errorType&&(t.use("tbc/mini-login/2.2.9/",function(t,o){var n=new o({zindex:2e8});n.on("login",function(){i.expand(e,a),TB.Global.reload()}),n.show()}),i.shrink(e,a))},i)})},shrink:function(e,a){var i=this,o=i.getItemBdEl(e);o.hide(),o.html(""),o.addClass("tb-toolbar-loading"),t.use("act20141212/c/2014-1212/sidebar/history/",function(t,e){e.detach()})}}}}),KISSY.add("kg/tbar/2.6.1/items/pk/pk-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos),l=n.data,s=n.affix,c=i.nativeCommands,d=i.utils;d.callFn,d.callDataFn,d.callCommand,c.range,c.foreach,c.forin,c.each,c["with"],c["if"],c.set,c.include,c.parse,c.extend,c.block,c.macro,c["debugger"];o.data+='<li class="tb-toolbar-item" data-item="',r.line=1;var b=(e=s.name)!==t?e:(e=l.name)!==t?e:n.resolveLooseUp(["name"]);return o=o.write(b),o.data+='">\n    <a data-spm-click="gostr=/tbdetail;locaid=d3" href="#" class="tb-toolbar-item-hd">\n        <div class="tb-toolbar-item-icon">&#xe602;</div>\n        <div class="tb-toolbar-item-tip">\u5bf9\u6bd4<div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n    <div class="tb-toolbar-item-bd tb-toolbar-loading">\n    </div>\n</li>',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/pk/pk",["./pk-xtpl"],function(t,e){var a=e("./pk-xtpl"),i={},o={login:"click"};return{tpl:a,data:{},config:o,listeners:{init:function(e){var a=this;t.use("tb/pk/0.2.0/index",function(t,n){var r=a.getItemEl(e),l={trigger:a.getItemHdEl(e),wrapper:a.getItemBdEl(e)};o.ctItem&&(l.ctItem=o.ctItem),n.init(l),n.on("hide",function(){a.shrink("pk",{el:r})}),t.mix(i,{show:function(){n.show(),n.makePoint("pk.1.2")},add:function(t){n.addItem(t)},hide:function(){n.makePoint("pk.1.8")}})})},click:function(t,e){this.expand(t)},expand:function(t){this.getItemBdEl(t).show(),i.show&&i.show()},shrink:function(t){this.getItemBdEl(t).hide(),i.hide&&i.hide()},message:{add:function(t,e){i.add&&i.add(e)}}}}}),KISSY.add("kg/tbar/2.6.1/items/coupon/coupon-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos,n.data),l=n.affix,s=i.nativeCommands,c=i.utils;c.callFn,c.callDataFn,c.callCommand,s.range,s.foreach,s.forin,s.each,s["with"],s["if"],s.set,s.include,s.parse,s.extend,s.block,s.macro,s["debugger"];o.data+='<li class="tb-toolbar-item tb-toolbar-item-coupon" data-item="';var d=(e=l.name)!==t?e:(e=r.name)!==t?e:n.resolveLooseUp(["name"]);return o=o.write(d),o.data+='">\n    <a href="#" class="tb-toolbar-item-hd tb-toolbar-item-hd-coupon">\n        <div class="tb-toolbar-item-icon">&#xe603;</div>\n        <div class="tb-toolbar-item-tip tb-toolbar-item-tip-coupon">\u5e97\u94fa\u4f18\u60e0<div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n    <div class="tb-toolbar-item-hd-extra">\n        <div class="tb-toolbar-item-bubble tb-toolbar-item-bubble-coupon J_TBToolbarBubbleCoupon"><span class="tb-toolbar-item-bubble-txt">\u8be5\u5e97\u94fa\u53ef\u9886\u4f18\u60e0\u5238</span></br><a href="#" class="tb-toolbar-item-bubble-btn J_TBToolbarBubbleOpenCouponTgr" onclick="javascript:window.goldlog && goldlog.record && goldlog.record(\'/tbact.1212.12307.32\',\'\',\'\',\'H47641344\')">\u7acb\u5373\u9886\u53d6</a><span class="tb-toolbar-item-arrow">\u25c6</span><span class="tb-toolbar-item-bubble-saw"></span></div>\n    </div>\n    <div class="tb-toolbar-item-bd tb-toolbar-item-bd-coupon tb-toolbar-loading"></div>\n</li>\n',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/coupon/coupon",["node","./coupon-xtpl"],function(t,e){function a(){var t=l("meta[name=microscope-data]");if(t.length){var e=t.attr("content").match(/userid=\s*(\d+)/i);if(e&&e[1])return e[1]}return""}var i,o,n,r,l=e("node").all,s=e("./coupon-xtpl"),c=!1,d=!1,b={init:function(e){var l=this,s=l.get("blackList");c=t.inArray("toolbar-coupon-promot",s),d=t.inArray("toolbar-coupon-promot-cdn",s),r=a(),i=l.getItemHdEl(e),o=i.next(".tb-toolbar-item-hd-extra"),n=l.getItemBdEl(e),r&&!c&&t.use("act20141212/c/2014-1212/sidebar/coupon/init",function(t,e){e.init({switcher_cdn:d,sellerId:r,success:function(t){"0"===t.code&&t.data&&"1"===t.data.sellerishavecoupon&&(o&&o.show(),o.all(".J_TBToolbarBubbleOpenCouponTgr").on("click",function(t){return t.preventDefault(),i.fire("click"),!1}))},error:function(t){}})})},afterRender:function(t){},click:function(t,e){var a=this;e.currentTarget;a.expand(t)},expand:function(e){var a=this;n.show(),o&&(o.remove(),o=null),t.use("act20141212/c/2014-1212/sidebar/coupon/coupon",function(t,i){i.init({toolbar:a,itemName:e,sellerId:r,afterGetCoupons:function(){n.removeClass("tb-toolbar-loading")}})})},shrink:function(t){n.hide(),n.html(""),n.addClass("tb-toolbar-loading")},message:{expand:function(t){this.expand(t)}}};return{tpl:s,config:{login:"click",goldlog:["/tbact.1212.12306.11","","","H47641322"]},listeners:b}}),KISSY.add("kg/tbar/2.6.1/items/worthbuying/worthbuying-xtpl",function(t,e,a,i){var o=function(t){var e,a=this,i=a.root,o=a.buffer,n=a.scope,r=(a.runtime,a.name,a.pos,n.data),l=n.affix,s=i.nativeCommands,c=i.utils;c.callFn,c.callDataFn,c.callCommand,s.range,s.foreach,s.forin,s.each,s["with"],s["if"],s.set,s.include,s.parse,s.extend,s.block,s.macro,s["debugger"];o.data+='<li class="tb-toolbar-item tb-toolbar-item-worthbuying" data-item="';var d=(e=l.name)!==t?e:(e=r.name)!==t?e:n.resolveLooseUp(["name"]);return o=o.write(d),o.data+='">\n    <a href="#" class="tb-toolbar-item-hd">\n        <div class="tb-toolbar-item-icon">&#xe605;</div>\n        <div class="tb-toolbar-item-tip">\u503c\u5f97\u4e70<div class="tb-toolbar-item-arrow">\u25c6</div></div>\n    </a>\n    <div class="tb-toolbar-item-bd"></div>\n</li>\n',o};return o.TPL_NAME=i.name,o.version="kg",o}),KISSY.add("kg/tbar/2.6.1/items/worthbuying/worthbuying",function(t,e,a){var i,o,n,r=e.all;return{config:{login:"click"},tpl:a,data:{isLogin:TB.Global.isLogin},listeners:{click:function(t){this.expand(t)},expand:function(e){return i=this.getItemHdEl(e),o=this.getItemBdEl(e).show(),n?void n.refresh():void t.use("tbc/worthbuying/0.1.1/",function(t,e){e.init(o),e.refresh(),n=e,o.on("mousewheel",function(t){var e=t.currentTarget,a=t.delta,i=o.height(),n=e.scrollTop,l=r(e).children().height();(a>0&&0===n||a<0&&n+i>=l)&&t.halt()})})},shrink:function(t,e){var a=this.getItemBdEl(t);a.hide()}}}},{requires:["node","./worthbuying-xtpl"]}),KISSY.add("kg/tbar/2.6.1/toolbar-config",["./items/ww/ww","./items/feedback/feedback","./items/gotop/gotop","./items/cart/cart","./items/history/history","./items/pk/pk","./items/coupon/coupon","./items/worthbuying/worthbuying"],function(t,e){var a=!!~location.hostname.indexOf("daily.taobao.net"),i=a?"//g-assets.daily.taobao.net":"//g.alicdn.com";return t.config({packages:{tb:{base:i+"/tb/",ignorePackageNameInUri:!0},tp:{base:i+"/tp/",ignorePackageNameInUri:!0},act20141212:{base:i+"/tb/activity/1.6.1/",ignorePackageNameInUri:!0,debug:!0}}}),{ww:e("./items/ww/ww"),feedback:e("./items/feedback/feedback"),gotop:e("./items/gotop/gotop"),cart:e("./items/cart/cart"),history:e("./items/history/history"),pk:e("./items/pk/pk"),coupon:e("./items/coupon/coupon"),worthbuying:e("./items/worthbuying/worthbuying")}}),KISSY.add("kg/tbar/2.6.1/items/a11y/a11y",["node"],function(t,e){function a(t){9==t.keyCode&&n++,1==n&&(i=Date.parse(new Date)),n>10&&2e4>Date.parse(new Date)-i&&(r.detach("keydown",a),window.goldlog&&goldlog.record&&goldlog.record("/cact.1015.1","","url="+encodeURIComponent(location.host+location.pathname),"H46777383"))}var i,o=e("node").all,n=0,r=o(window);r.on("keydown",a)}),KISSY.add("kg/tbar/2.6.1/index",["base","node","anim","json","kg/xtemplate/4.2.0/runtime","./toolbar-xtpl","./toolbar-list-xtpl","./toolbar-config","./items/a11y/a11y","./index.css"],function(t,e){function a(){var e=document.getElementById("J_SiteNav");if(e){var a=e.getAttribute("data-tbar");if(a){a=r.parse(a);var i=a.show;if(i){var o=(window.g_config||{}).appId||0,n=a.page;n&&n.length&&-1!==t.indexOf(o,n)&&(i=!1)}return{show:i,blackList:t.isArray(a.blackList)?a.blackList:[]}}}}var i=e("base"),o=e("node"),n=e("anim"),r=e("json"),l=e("kg/xtemplate/4.2.0/runtime"),s=e("./toolbar-xtpl"),c=e("./toolbar-list-xtpl"),d=e("./toolbar-config");e("./items/a11y/a11y"),e("./index.css");var b="expand",u="shrink",m="afterShrink",f="tb-toolbar-item-hd-active",g=".tb-toolbar-item-hd",p=".tb-toolbar-item-bd",h=o.all,v=h("body"),k=!1,w=i.extend({initializer:function(){if(!k){var e=a();if(!(e&&e.show===!1||this.hostIsInBlackList())){k=!0;var i=new l(s).render({}),o=new l(c).render({}),n=h(i);this.el=n;var r=this.get("items"),b=this,u=["black"],m=this.get("style");t.inArray(m,u)&&this.el.addClass("tb-toolbar-"+m),t.UA.ie<=8&&document.body.clientWidth<1366&&this.el.addClass("tb-toolbar-mini"),this.get("expandToRight")&&this.el.addClass("tb-toolbar-right");var f=b.get("defaultSpacing"),g=b.get("blackList");e&&e.blackList&&g.concat(e.blackList),t.each(r,function(e,a){var i=h('<div class="tb-toolbar-space"></div>');i.css({height:f[a]}),n.append(i);var r=h(o),s=e.list?e.list.length:0;t.each(e.list||[],function(a,i){r.addClass("tb-toolbar-list-with-"+a);var o,n=a;if(t.isObject(a)&&(n=a.type,o=a.css),!t.inArray(n,g)){var c=d[n];if(c){var u=c.tpl;if(u){var m=c.data||{};m.name=n;var f=new l(u).render(m),a=h(f);b.items.push(n),b.set(n,a),o&&a.css(o),r.append(a),e.splitLine&&i!=s-1&&r.append('<li class="tb-toolbar-item-split"></li>')}var p=c.listeners,k=p&&p.init;k&&k.apply(b,[n]);var w=p&&p.message;if(t.isPlainObject(w))t.each(w,function(e,a){var i=["toolbar",n,a].join(":");v.on(i,t.bind(e,b,n))});else if(t.isFunction(w)){var x=["toolbar",n,"message"].join(":");v.on(x,t.bind(w,b,n))}}}}),e.css&&r.css(e.css),n.append(r)}),this.set("created",!0)}}},destructor:function(){this.el.remove(),this.set("created",!1),this.set("rendered",!1),this.el=null},items:[],render:function(){if(!this.get("rendered")){h(this.get("render")).append(this.el),this.set("rendered",!0),this.binding();var e=this.items,a=this;t.each(e,function(t){var e=d[t].listeners,i=e&&e.afterRender;i&&i.apply(a,[t])})}},binding:function(){function e(e,a){function o(){var t=a.type,o=d[e].listeners;o&&o[t]&&o[t].apply(i,[e,a])}w.config(e).login!==a.type||TB.Global.isLogin?o():t.use("tbc/mini-login/2.2.9/",function(t,e){var a=new e({zindex:2e8});a.on("login",function(){v.fire("toolbar:login"),o()}),a.show()})}var a=this.el,i=this;a.delegate("click",".tb-toolbar-item-hd",function(t){t.preventDefault();var a=t.currentTarget,i=h(a).parent().attr("data-item");e(i,t)}),a.delegate("mouseenter mouseleave",".tb-toolbar-item",function(t){t.preventDefault();var a=t.currentTarget,i=h(a).attr("data-item");e(i,t)}),h(document).on("click",function(t){a.contains(t.target)||a.equals(t.target)||i.shrink()})},getExpanded:function(){return this.get("expanded").item},getItemEl:function(t){return this.get(t)},getItemHdEl:function(t){var e=this.getItemEl(t);return e&&e.all(g)},getItemBdEl:function(t){var e=this.getItemEl(t);return e&&e.all(p)},fly:function(e){var a=e.pos;if(e.trigger){var i=h(e.trigger).offset();i&&(a=i)}var o=e.$target,n=e.pic?e.pic.replace(/_(sum|\d{2,5}x\d{2,5})\.jpg$/,"_50x50.jpg"):"//g.alicdn.com/s.gif",r=h('<div class="tb-toolbar-flyer" style="background: url('+n+') no-repeat 50% 50%;"></div>').css("left",a.left).css("top",a.top).appendTo("body");t.use(["anim","ua"],function(t,a,i){var n=o.offset();a(r,{left:n.left-100,top:n.top},.5,"easeNone",function(){var t={left:n.left+10};(!i.ie||i.ie>8)&&(t.opacity=0),a(r,t,.8,"easeNone",function(){r.remove(),e.success&&e.success()}).run()}).run()})},expand:function(t,e){var a=this.get("expanded"),i=a.item;if(i&&(i!==t?this.shrink(null,null,!0):this.shrink()),t!==i){this.getItemHdEl(t).addClass(f);var o=d[t].listeners[b];o&&o.apply(this,[t,e]),this.set("expanded",{item:t,data:e}),this.el.removeClass("tb-toolbar-shrinked"),this.get("expandToRight")&&(n.stop(this.el,!0),new n(this.el,{right:this.getItemBdEl(t).outerWidth()},.3,"easeOut",function(){},(!0)).run())}},shrink:function(t,e,a){var i=this.get("expanded"),o=i.item;if(o){var r=i.data;this.getItemHdEl(o).removeClass(f);var l=d[o].listeners[u];this.set("expanded",{}),this.el.addClass("tb-toolbar-shrinked");var s=this;if(this.get("expandToRight")&&!a)return n.stop(this.el,!0),void new n(this.el,{right:0},.3,"easeOut",function(){l&&l.apply(s,[o,r]),v.fire("toolbar:shrink")},(!0)).run();l&&l.apply(this,[o,r]),v.fire("toolbar:shrink")}},afterShrink:function(){var t=this.get("shrinking"),e=t.item;if(e){var a=t.data,i=d[e].listeners[m];i&&i.apply(this,[e,a]),this.set("shrinking",{}),v.fire("toolbar:afterShrink")}},hostIsInBlackList:function(){var e=location.host,a=this.get("hostBLackList");return t.inArray(e,a)}},{ATTRS:{render:{value:document.body},created:{value:!1},rendered:{value:!1},expanded:{value:{}},shrinking:{value:{}},items:{value:[{list:["worthbuying","cart","history","coupon"],splitLine:!0},{list:["feedback","gotop"]}]},defaultSpacing:{value:["25%","7%"]},style:{value:""},expandToRight:{value:!0},blackList:{value:[]},hostBLackList:{value:["g.taobao.com","guang.taobao.com","lu.taobao.com","tw.taobao.com","sea.taobao.com","hk.taobao.com","cun.taobao.com"]}},ITEMS:d,register:function(t,e){return d[t]=e,d},config:function(){if(t.isObject(arguments[0]))return void t.each(arguments[0],function(e,a){var i=d[a];if(i){var o=i.config||{};e&&(i.config=t.mix(o,e))}});var e=arguments[0],a=arguments[1],i=d[e];if(i){var o=i.config||{};return a&&(i.config=t.mix(o,a)),o}}});return w});