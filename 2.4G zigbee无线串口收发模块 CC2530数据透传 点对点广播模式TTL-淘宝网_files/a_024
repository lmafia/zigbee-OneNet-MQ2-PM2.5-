KISSY.add("kg/doctor/0.0.1/index",["node","base","./index.css"],function(t,e){var r=e("node"),i=e("base");e("./index.css");var o=r.all,n=t.UA,a=t.Anim,s=6048e5,c="tb_doctor_last",d="doctor:screen:zoom",l="doctor:screen:reset",u=o("body"),h=window,v=i.extend({initializer:function(){function t(t){var r=o(t),i=o(".tb-doctor-contents",c);i.append(r),e.binding(),e.show()}var e=this,r=e.getLast(),i=this.get("interval"),a=+new Date-parseInt(r,10)>i,s=e.get("template"),c=o(s);if(e.set("el",c),(!r||a)&&e.detectZoom()){u.fire(d);var h='<p>\u60a8\u6240\u8bbf\u95ee\u7684\u7f51\u9875\u5185\u5bb9\u88ab\u7f29\u653e\u53ef\u80fd\u5f71\u54cd\u6b63\u5e38\u4f7f\u7528\uff0c\u53ef\u4ee5\u4f7f\u7528\u952e\u76d8\u5feb\u6377\u952e <span class="tb-doctor-highlight">'+("macintosh"==n.os?"\u2318":"Ctrl")+'</span> \u548c <span class="tb-doctor-highlight">0</span> \u6062\u590d\u6b63\u5e38\u3002</p>';t(h),o(document).on("keydown",function(t){48!==t.keyCode&&96!==t.keyCode||!("macintosh"===n.os&&t.metaKey&&!t.ctrlKey||"macintosh"!==n.os&&t.ctrlKey)||(e.hide(),u.fire(l))})}this.set("created",!0)},destructor:function(){this.$el.remove(),this.set("created",!1),this.$el=null,this.el=null},binding:function(){var t=this;t.$el.delegate("click",".tb-doctor-close",function(e){return e.preventDefault(),t.setLast(),t.hide()})},show:function(){var t=this.$el;t.appendTo("body"),t.show();var e=new a(t,{height:45},.3,"easeOut");return e.run()},hide:function(){var t=this.$el,e=new a(t,{height:0},.3,"easeOut");return e.run()},initIEUserData:function(){if(!this.initedIEUserData){var t=o('<div style="behavior:url(#default#userData);"></div>');t.appendTo("body");var e=t[0];this.set("storageEl",e),this.initedIEUserData=!0}return this.get("storageEl")},setLast:function(){return this.setStore(c,+new Date)},getLast:function(){return this.getStore(c)},getStore:function(t){var e=this;try{if(window.localStorage)return localStorage[t];var r=e.initIEUserData();return r.load("TaoBaoDoctor"),r.getAttribute(t)}catch(i){}},setStore:function(t,e){var r=this;try{if(!window.localStorage){var i=r.initIEUserData();return i.setAttribute(t,e),i.save("TaoBaoDoctor")}localStorage[t]=e}catch(o){}},detectUpdate:function(){return n.ie&&n.ie<8&&-1==navigator.userAgent.indexOf("TaoBrowser")},detectZoom:function(){function t(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}var e=1,r=h.devicePixelRatio;return r&&1>r&&r>0?(e=r,v.dpr=r):isNaN(screen.deviceXDPI)||isNaN(screen.logicalXDPI)?h.outerWidth>0&&h.innerWidth>0&&(v.outerWidth=h.outerWidth,v.innerWidth=h.innerWidth,e=h.outerWidth/h.innerWidth):e=screen.deviceXDPI/screen.logicalXDPI,v.zoom=e,1!==t(e,1)}},{ATTRS:{el:{setter:function(t){this.$el=t,this.el=t[0]}},template:{value:'<div class="tb-doctor">                    <div class="tb-doctor-contents">                    <a href="javascript:;" class="tb-doctor-close">\u5173\u95ed</a></div></div>'},interval:{value:s},check:{value:["zoom","update"]}}});return h.Doctor=v,v});