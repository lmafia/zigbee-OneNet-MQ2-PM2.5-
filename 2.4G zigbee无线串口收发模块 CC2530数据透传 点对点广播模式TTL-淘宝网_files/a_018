KISSY.add("wangpu/gallery/template",function(a){function b(b){if(!c[b]){var d,e,f=a.guid(h),g=[n,f,o,e=t(b),p];try{d=new Function(f,g.join(""))}catch(i){g[3]=j+k+l+","+i.message+j+k,d=new Function(f,g.join(""))}c[b]={name:f,o:e,parser:g.join(""),render:d}}return c[b]}var c={},d={"#":"start","@":"start","/":"end"},e="KS_TEMPL_STAT_PARAM",f=new RegExp(e,"g"),g="KS_TEMPL",h="KS_DATA_",i="as",j='");',k=g+'.push("',l="KISSY.Template: Syntax Error. ",m="KISSY.Template: Render Error. ",n="var "+g+"=[],"+e+"=false;with(",o="||{}){try{"+g+'.push("',p='");}catch(e){'+g+'=["'+m+'" + e.message]}};return '+g+'.join("");',q=function(a){return a.replace(/\\"/g,'"')},r=function(a){return a.replace(/"/g,'\\"')},s=a.trim,t=function(b){var c,e;return r(s(b).replace(/[\r\t\n]/g," ").replace(/\\/g,"\\\\")).replace(/\{\{([#\/@]?)(?!\}\})([^}]*)\}\}/g,function(b,h,i){if(c="",i=q(s(i)),h){e=i.indexOf(" "),i=-1===e?[i,""]:[i.substring(0,e),i.substring(e)];var l,m=i[0],n=s(i[1]),o=u[m];o&&d[h]&&(l=o[d[h]],c=String(a.isFunction(l)?l.apply(this,n.split(/\s+/)):l.replace(f,n)))}else c=g+".push(typeof ("+i+') ==="undefined"?"":'+i+");";return j+c+k})},u={"if":{start:"if(typeof ("+e+') !=="undefined" && '+e+"){",end:"}"},"else":{start:"}else{"},elseif:{start:"}else if("+e+"){"},each:{start:function(a,b,c,d){var e="_ks_value",f="_ks_index";return b===i&&c&&(e=c||e,f=d||f),"KISSY.each("+a+", function("+e+", "+f+"){"},end:"});"},"!":{start:"/*"+e+"*/"}};return a.mix(b,{log:function(d){d in c?a.log(c[d].parser,"info"):(b(d),this.log(d))},addStatement:function(b,c){"string"==typeof b?u[b]=c:a.mix(u,b)}}),a.Template=b,b});